"use strict";$(function(){$(function(){$(".site__header").each(function(){new n($(this))}),$(".main").each(function(){new i($(this))}),$(".project__slider").each(function(){new t($(this))}),$(".project__pic").each(function(){$(".project__pic-wrap > a").fancybox({padding:0})}),$(".form-validation").each(function(){new e($(this))}),$(".all-works").each(function(){new o($(this))}),$(".filter").each(function(){new a($(this))}),$(".wpcf7 input").on({focus:function(){$(this).parent().find(".wpcf7-not-valid-tip").remove()}})});var n=function(n){var i=n,t=$(".menu__close, .menu-btn"),e=!1,o=function(){$(window).on({resize:function(){s()}}),t.on({click:function(){i.toggleClass("open"),t.toggleClass("open")}})},a=function(){i.niceScroll({cursorcolor:"#fff",railalign:"right",cursorwidth:3,cursorborder:0,autohidemode:!1,railpadding:{top:0,right:0,left:0,bottom:0}})},s=function(){e?$(window).width()>1023?i.getNiceScroll().resize():(i.getNiceScroll().remove(),i.removeClass("site__header_nice-scroll"),e=!1):$(window).width()>1023&&(a(),i.addClass("site__header_nice-scroll"),e=!0)},r=function(){o(),s()};r()},i=function(n){var i=n,t=n.find(".main__slider-next"),e=n.find(".main__slider-prev"),o=i.find(".main__slider"),a=null,s=1,r=n.find(".main__clients-pagination"),c=i.find(".main__clients"),l=null,f=5e3,d=1,u=function(){},p=function(){a=new Swiper(o.find(".swiper-container"),{nextButton:t,prevButton:e,autoplay:7e3,slidesPerView:s,loop:!0})},_=function(){l=new Swiper(c.find(".swiper-container"),{pagination:r,slidesPerView:d,loop:!0,autoplay:f,paginationClickable:!0})},h=function(){u(),p(),_()};h()},t=function(n){var i=n,t=n.find(".project__slider-next"),e=n.find(".project__slider-prev"),o=null,a=1,s=function(){},r=function(){o=new Swiper(i.find(".swiper-container"),{nextButton:t,prevButton:e,slidesPerView:a,loop:!0})},c=function(){s(),r()};c()},e=function(n){var i=this,t=n,e=t.attr("action"),o=t.find("[required]"),a=t.find(".site__form-sent"),s=new XMLHttpRequest,r=function(){t.on({submit:function(){return $.each(o,function(){var n=$(this),i=n.attr("type");if(""==n.val()&&n.parent().addClass("form-validation__error"),"email"==i){var t=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;0==t.test(n.val())&&n.parent().addClass("form-validation__error")}}),t.find(".form-validation__error").length?!1:(c(),!1)}}),o.on({focus:function(){var n=$(this);n.parent().hasClass("form-validation__error")&&n.parent().removeClass("form-validation__error")}})},c=function(){s.abort(),s=$.ajax({url:e,data:t.serialize(),dataType:"html",timeout:2e4,type:"get",success:function(){a.length&&a.addClass("site__form-sent_show")},error:function(n){"abort"!=n.statusText&&alert("Error!")}})},l=function(){r(),t[0].obj=i};l()},o=function(n){var i=this,t=n,e=t.find(".site__title"),o=e.offset().top,a=e.innerHeight(),s=0,r=t.find(".filter"),c=t.find("input"),l=r.offset().top,f=r.innerHeight(),d=0,u=$(window),p=u.scrollTop(),_=!0,h=t.find(".all-works__wrap"),w=t.find(".all-works__loader"),m=1,v=function(){u.on({load:function(){o=e.offset().top,l=r.offset().top,b()},scroll:function(){b(),p+u.height()>h.offset().top+h.height()&&_&&(_=!1,w.addClass("active"),x(!1))},resize:function(){o=e.offset().top,l=r.offset().top,b()}}),c.on({change:function(){_=!1,m=0,w.addClass("active"),x(!0)}})},g=function(){var n;s=e.hasClass("fixed")?e.innerHeight()+parseInt(e.css("margin-bottom")):0,d=r.hasClass("fixed")?r.innerHeight()+parseInt(r.css("margin-bottom")):0,n=s+d,t.css({"padding-top":n})},C=function(n){for(var i=0;i<n.length;i++)h.append('<div class="all-works__item all-works__item_added"><a href="'+n[i].link+'" class="all-works__pic" style="background-image: url('+n[i].pic+')"></a><div class="all-works__footer"><span class="all-works__name">'+n[i].name+'</span><span class="all-works__icon">'+n[i].icon+'</span><span class="all-works__square">'+n[i].square+'<span>m<span>2</span></span></span><a href="'+n[i].link+'" class="btn btn_2"></a></div></div>');setTimeout(function(){$(".all-works__item").removeClass("all-works__item_added")},50)},b=function(){a=e.innerHeight(),f=r.innerHeight(),p=u.scrollTop(),k(),j(),g()},k=function(){p>=l-a?(r.addClass("fixed"),r.css({top:a})):(r.removeClass("fixed"),r.css({top:""}))},x=function(n){$.ajax({url:$("body").data("action"),data:{action:"get_posts",filterData:$(".filter").serialize(),currentPage:m},dataType:"json",type:"get",success:function(i){n&&$(".all-works__item").remove(),w.removeClass("active"),C(i.items),i.col>0?(m++,_=!0):_=!1},error:function(n){"abort"!=n.statusText}})},j=function(){p>o?e.addClass("fixed"):e.removeClass("fixed")},y=function(){b(),v(),t[0].obj=i};y()},a=function(n){var i=this,t=n,e=t.find("input"),o=function(){e.on({change:function(){}})},a=function(){o(),t[0].obj=i};a()}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiZWFjaCIsIk1lbnUiLCJ0aGlzIiwiTWFpbiIsIlByb2plY3RTbGlkZXIiLCJmYW5jeWJveCIsInBhZGRpbmciLCJGb3JtVmFsaWRhdGlvbiIsIkFsbFdvcmtzIiwiRmlsdGVyIiwib24iLCJmb2N1cyIsInBhcmVudCIsImZpbmQiLCJyZW1vdmUiLCJvYmoiLCJfb2JqIiwiX2J0bnMiLCJfc2Nyb2xsQWRkZWQiLCJfYWRkRXZlbnRzIiwid2luZG93IiwicmVzaXplIiwiX2NhbkFkZFNjcm9sbCIsImNsaWNrIiwidG9nZ2xlQ2xhc3MiLCJfYWRkU2Nyb2xsIiwibmljZVNjcm9sbCIsImN1cnNvcmNvbG9yIiwicmFpbGFsaWduIiwiY3Vyc29yd2lkdGgiLCJjdXJzb3Jib3JkZXIiLCJhdXRvaGlkZW1vZGUiLCJyYWlscGFkZGluZyIsInRvcCIsInJpZ2h0IiwibGVmdCIsImJvdHRvbSIsIndpZHRoIiwiZ2V0TmljZVNjcm9sbCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJfaW5pdCIsIl9uZXh0QnRuIiwiX3ByZXZCdG4iLCJfbWFpblNsaWRlcldyYXAiLCJfbWFpblNsaWRlciIsIl9wZXJWaWV3IiwiX3BhZ2luYXRpb25DbGllbnRzIiwiX21haW5TbGlkZXJDbGllbnRzV3JhcCIsIl9tYWluU2xpZGVyQ2xpZW50cyIsIl9kdXJhdGlvbiIsIl9wZXJWaWV3Q2xpZW50cyIsIl9hZGRNYWluU2xpZGVyIiwiU3dpcGVyIiwibmV4dEJ1dHRvbiIsInByZXZCdXR0b24iLCJhdXRvcGxheSIsInNsaWRlc1BlclZpZXciLCJsb29wIiwiX2FkZE1haW5TbGlkZXJDbGllbnRzIiwicGFnaW5hdGlvbiIsInBhZ2luYXRpb25DbGlja2FibGUiLCJfYWRkU2xpZGVyIiwiX3NlbGYiLCJfcGF0aCIsImF0dHIiLCJfaW5wdXRzIiwiX3NlbnRNZXNzYWdlTWFyayIsIl9yZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJzdWJtaXQiLCJjdXJJdGVtIiwiY3VyQXR0ciIsInZhbCIsInBhdHRlcm4iLCJ0ZXN0IiwibGVuZ3RoIiwiX2FqYXhSZXF1ZXN0IiwiaGFzQ2xhc3MiLCJhYm9ydCIsImFqYXgiLCJ1cmwiLCJkYXRhIiwic2VyaWFsaXplIiwiZGF0YVR5cGUiLCJ0aW1lb3V0IiwidHlwZSIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1c1RleHQiLCJhbGVydCIsIl9zaXRlVGl0bGUiLCJfdGl0bGVQb3NUb3AiLCJvZmZzZXQiLCJfdGl0bGVIZWlnaHQiLCJpbm5lckhlaWdodCIsIl90aXRsZUhlaWdodEluZGVudCIsIl9maWx0ZXIiLCJfZmlsdGVySXRlbSIsIl9maWx0ZXJQb3NUb3AiLCJfZmlsdGVySGVpZ2h0IiwiX2ZpbHRlckhlaWdodEluZGVudCIsIl93aW5kb3ciLCJfc2Nyb2xsVG9wIiwic2Nyb2xsVG9wIiwiX2NhbkFkZFByb2plY3RzIiwiX3dvcmtzV3JhcCIsIl9sb2FkZXIiLCJjdXJyZW50UGFnZSIsImxvYWQiLCJfY2FsY3VsYXRlVmFsdWVzIiwic2Nyb2xsIiwiaGVpZ2h0IiwiX3NlbmRBamF4IiwiY2hhbmdlIiwiX2FkZFBhZGRpbmciLCJwYWRkaW5nVG9wIiwicGFyc2VJbnQiLCJjc3MiLCJwYWRkaW5nLXRvcCIsIl9hZGRJdGVtcyIsImFyciIsImkiLCJhcHBlbmQiLCJsaW5rIiwicGljIiwibmFtZSIsImljb24iLCJzcXVhcmUiLCJzZXRUaW1lb3V0IiwiX2ZpbHRlckZpeGVkIiwiX3RpdGxlRml4ZWQiLCJjYW5SZW1vdmVQcm9qZWN0cyIsImFjdGlvbiIsImZpbHRlckRhdGEiLCJtc2ciLCJpdGVtcyIsImNvbCIsIl9pdGVtIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFBQSxHQUFFLFdBR0VBLEVBQUUsV0FFRUEsRUFBRSxpQkFBaUJDLEtBQU0sV0FDckIsR0FBSUMsR0FBTUYsRUFBRUcsU0FHaEJILEVBQUUsU0FBU0MsS0FBTSxXQUNiLEdBQUlHLEdBQU1KLEVBQUVHLFNBR2hCSCxFQUFFLG9CQUFvQkMsS0FBTSxX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IjpbIiQoZnVuY3Rpb24oKXtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAkKGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgJCgnLnNpdGVfX2hlYWRlcicpLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmV3IE1lbnUoICQodGhpcykgKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5tYWluJykuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuZXcgTWFpbiggJCh0aGlzKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLnByb2plY3RfX3NsaWRlcicpLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmV3IFByb2plY3RTbGlkZXIoICQodGhpcykgKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5wcm9qZWN0X19waWMnKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoXCIucHJvamVjdF9fcGljLXdyYXAgPiBhXCIpLmZhbmN5Ym94KHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5mb3JtLXZhbGlkYXRpb24nKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5ldyBGb3JtVmFsaWRhdGlvbiggJCh0aGlzKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLmFsbC13b3JrcycpLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmV3IEFsbFdvcmtzKCAkKHRoaXMpICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCcuZmlsdGVyJykuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuZXcgRmlsdGVyKCAkKHRoaXMpICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCAnLndwY2Y3IGlucHV0Jykub24oIHtcbiAgICAgICAgICAgICdmb2N1cyc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLndwY2Y3LW5vdC12YWxpZC10aXAnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuXG4gICAgfSk7XG5cbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uKCBvYmogKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfYnRucz0gJCgnLm1lbnVfX2Nsb3NlLCAubWVudS1idG4nKSxcbiAgICAgICAgICAgIF9zY3JvbGxBZGRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQod2luZG93KS5vbigge1xuICAgICAgICAgICAgICAgICAgICAncmVzaXplJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FuQWRkU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfYnRucy5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnRvZ2dsZUNsYXNzKCAnb3BlbicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9idG5zLnRvZ2dsZUNsYXNzKCAnb3BlbicgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRTY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqLm5pY2VTY3JvbGwoe1xuICAgICAgICAgICAgICAgICAgICBjdXJzb3Jjb2xvcjogXCIjZmZmXCIsXG4gICAgICAgICAgICAgICAgICAgIHJhaWxhbGlnbjogJ3JpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yd2lkdGg6IDMsXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcmJvcmRlcjogMCxcbiAgICAgICAgICAgICAgICAgICAgYXV0b2hpZGVtb2RlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcmFpbHBhZGRpbmc6IHt0b3A6IDAsIHJpZ2h0OiAwLCBsZWZ0OiAwLCBib3R0b206IDB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NhbkFkZFNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICggX3Njcm9sbEFkZGVkICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICQoIHdpbmRvdyApLndpZHRoKCkgPiAxMDIzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5nZXROaWNlU2Nyb2xsKCkucmVzaXplKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmdldE5pY2VTY3JvbGwoKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfbmljZS1zY3JvbGwnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2Nyb2xsQWRkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggJCggd2luZG93ICkud2lkdGgoKSA+IDEwMjMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYWRkU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX25pY2Utc2Nyb2xsJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Njcm9sbEFkZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2NhbkFkZFNjcm9sbCgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgTWFpbiA9IGZ1bmN0aW9uKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX25leHRCdG4gPSBvYmouZmluZCggJy5tYWluX19zbGlkZXItbmV4dCcgKSxcbiAgICAgICAgICAgIF9wcmV2QnRuID0gb2JqLmZpbmQoICcubWFpbl9fc2xpZGVyLXByZXYnICksXG4gICAgICAgICAgICBfbWFpblNsaWRlcldyYXAgPSBfb2JqLmZpbmQoJy5tYWluX19zbGlkZXInKSxcbiAgICAgICAgICAgIF9tYWluU2xpZGVyID0gbnVsbCxcbiAgICAgICAgICAgIF9wZXJWaWV3ID0gMSxcbiAgICAgICAgICAgIF9wYWdpbmF0aW9uQ2xpZW50cyA9IG9iai5maW5kKCAnLm1haW5fX2NsaWVudHMtcGFnaW5hdGlvbicgKSxcbiAgICAgICAgICAgIF9tYWluU2xpZGVyQ2xpZW50c1dyYXAgPSBfb2JqLmZpbmQoJy5tYWluX19jbGllbnRzJyksXG4gICAgICAgICAgICBfbWFpblNsaWRlckNsaWVudHMgPSBudWxsLFxuICAgICAgICAgICAgX2R1cmF0aW9uID0gNTAwMCxcbiAgICAgICAgICAgIF9wZXJWaWV3Q2xpZW50cyA9IDE7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZE1haW5TbGlkZXIgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9tYWluU2xpZGVyID0gbmV3IFN3aXBlciggX21haW5TbGlkZXJXcmFwLmZpbmQoICcuc3dpcGVyLWNvbnRhaW5lcicgKSwge1xuICAgICAgICAgICAgICAgICAgICBuZXh0QnV0dG9uOiBfbmV4dEJ0bixcbiAgICAgICAgICAgICAgICAgICAgcHJldkJ1dHRvbjogX3ByZXZCdG4sXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiA3MDAwLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBfcGVyVmlldyxcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRNYWluU2xpZGVyQ2xpZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX21haW5TbGlkZXJDbGllbnRzID0gbmV3IFN3aXBlciggX21haW5TbGlkZXJDbGllbnRzV3JhcC5maW5kKCAnLnN3aXBlci1jb250YWluZXInICksIHtcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbjogX3BhZ2luYXRpb25DbGllbnRzLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBfcGVyVmlld0NsaWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiBfZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb25DbGlja2FibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfYWRkTWFpblNsaWRlcigpO1xuICAgICAgICAgICAgICAgIF9hZGRNYWluU2xpZGVyQ2xpZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBQcm9qZWN0U2xpZGVyID0gZnVuY3Rpb24ob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfbmV4dEJ0biA9IG9iai5maW5kKCAnLnByb2plY3RfX3NsaWRlci1uZXh0JyApLFxuICAgICAgICAgICAgX3ByZXZCdG4gPSBvYmouZmluZCggJy5wcm9qZWN0X19zbGlkZXItcHJldicgKSxcbiAgICAgICAgICAgIF9tYWluU2xpZGVyID0gbnVsbCxcbiAgICAgICAgICAgIF9wZXJWaWV3ID0gMTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWRkU2xpZGVyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfbWFpblNsaWRlciA9IG5ldyBTd2lwZXIoIF9vYmouZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApLCB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRCdXR0b246IF9uZXh0QnRuLFxuICAgICAgICAgICAgICAgICAgICBwcmV2QnV0dG9uOiBfcHJldkJ0bixcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogX3BlclZpZXcsXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfYWRkU2xpZGVyKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIEZvcm1WYWxpZGF0aW9uID0gZnVuY3Rpb24oIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9wYXRoID0gX29iai5hdHRyKCAnYWN0aW9uJyApLFxuICAgICAgICAgICAgX2lucHV0cyA9IF9vYmouZmluZCggJ1tyZXF1aXJlZF0nICksXG4gICAgICAgICAgICBfc2VudE1lc3NhZ2VNYXJrID0gX29iai5maW5kKCAnLnNpdGVfX2Zvcm0tc2VudCcgKSxcbiAgICAgICAgICAgIF9yZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9vYmoub24oe1xuXG4gICAgICAgICAgICAgICAgICAgICdzdWJtaXQnOiBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goIF9pbnB1dHMsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyQXR0ciA9IGN1ckl0ZW0uYXR0ciggJ3R5cGUnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ckl0ZW0udmFsKCkgPT0gJycgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucGFyZW50KCkuYWRkQ2xhc3MoICdmb3JtLXZhbGlkYXRpb25fX2Vycm9yJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY3VyQXR0ciA9PSAnZW1haWwnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gL14oW2EtejAtOV9cXC4tXSkrQFthLXowLTktXStcXC4oW2Etel17Miw0fVxcLik/W2Etel17Miw0fSQvaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXR0ZXJuLnRlc3QoIGN1ckl0ZW0udmFsKCkgKSA9PSBmYWxzZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5wYXJlbnQoKS5hZGRDbGFzcyggJ2Zvcm0tdmFsaWRhdGlvbl9fZXJyb3InICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfb2JqLmZpbmQoICcuZm9ybS12YWxpZGF0aW9uX19lcnJvcicgKS5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWpheFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgX2lucHV0cy5vbih7XG5cbiAgICAgICAgICAgICAgICAgICAgJ2ZvY3VzJzogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCggdGhpcyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5wYXJlbnQoKS5oYXNDbGFzcyggJ2Zvcm0tdmFsaWRhdGlvbl9fZXJyb3InICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5wYXJlbnQoKS5yZW1vdmVDbGFzcyggJ2Zvcm0tdmFsaWRhdGlvbl9fZXJyb3InICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWpheFJlcXVlc3QgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgICAgICAgICAgX3JlcXVlc3QgPSAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IF9wYXRoLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBfb2JqLnNlcmlhbGl6ZSgpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAyMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19vYmoudHJpZ2dlciggJ3Jlc2V0JyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF9zZW50TWVzc2FnZU1hcmsubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZW50TWVzc2FnZU1hcmsuYWRkQ2xhc3MoICdzaXRlX19mb3JtLXNlbnRfc2hvdycgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoIFhNTEh0dHBSZXF1ZXN0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gXCJhYm9ydFwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCAnRXJyb3IhJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuXG4gICAgfTtcblxuICAgIHZhciBBbGxXb3JrcyA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3NpdGVUaXRsZSA9IF9vYmouZmluZCggJy5zaXRlX190aXRsZScgKSxcbiAgICAgICAgICAgIF90aXRsZVBvc1RvcCA9IF9zaXRlVGl0bGUub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgX3RpdGxlSGVpZ2h0ID0gX3NpdGVUaXRsZS5pbm5lckhlaWdodCgpLFxuICAgICAgICAgICAgX3RpdGxlSGVpZ2h0SW5kZW50ID0gMCxcbiAgICAgICAgICAgIF9maWx0ZXIgPSBfb2JqLmZpbmQoICcuZmlsdGVyJyApLFxuICAgICAgICAgICAgX2ZpbHRlckl0ZW0gPSBfb2JqLmZpbmQoICdpbnB1dCcgKSxcbiAgICAgICAgICAgIF9maWx0ZXJQb3NUb3AgPSBfZmlsdGVyLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgIF9maWx0ZXJIZWlnaHQgPSBfZmlsdGVyLmlubmVySGVpZ2h0KCksXG4gICAgICAgICAgICBfZmlsdGVySGVpZ2h0SW5kZW50ID0gMCxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF9zY3JvbGxUb3AgPSBfd2luZG93LnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgX2NhbkFkZFByb2plY3RzID0gdHJ1ZSxcbiAgICAgICAgICAgIF93b3Jrc1dyYXAgPSBfb2JqLmZpbmQoJy5hbGwtd29ya3NfX3dyYXAnKSxcbiAgICAgICAgICAgIF9sb2FkZXIgPSBfb2JqLmZpbmQoICcuYWxsLXdvcmtzX19sb2FkZXInKSxcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlID0gMTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oe1xuICAgICAgICAgICAgICAgICAgICAnbG9hZCc6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGl0bGVQb3NUb3AgPSBfc2l0ZVRpdGxlLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9maWx0ZXJQb3NUb3AgPSBfZmlsdGVyLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYWxjdWxhdGVWYWx1ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3Njcm9sbCc6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FsY3VsYXRlVmFsdWVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIChfc2Nyb2xsVG9wICsgX3dpbmRvdy5oZWlnaHQoKSApID4gKF93b3Jrc1dyYXAub2Zmc2V0KCkudG9wICsgX3dvcmtzV3JhcC5oZWlnaHQoKSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfY2FuQWRkUHJvamVjdHMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYW5BZGRQcm9qZWN0cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9hZGVyLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbmRBamF4KCBmYWxzZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3Jlc2l6ZSc6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGl0bGVQb3NUb3AgPSBfc2l0ZVRpdGxlLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9maWx0ZXJQb3NUb3AgPSBfZmlsdGVyLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYWxjdWxhdGVWYWx1ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgX2ZpbHRlckl0ZW0ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NoYW5nZSc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NhbkFkZFByb2plY3RzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9hZGVyLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZW5kQWpheCggdHJ1ZSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZFBhZGRpbmcgPSBmdW5jdGlvbigpICB7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFkZGluZ1RvcDtcblxuICAgICAgICAgICAgICAgIGlmICggX3NpdGVUaXRsZS5oYXNDbGFzcyggJ2ZpeGVkJyApICl7XG4gICAgICAgICAgICAgICAgICAgIF90aXRsZUhlaWdodEluZGVudCA9IF9zaXRlVGl0bGUuaW5uZXJIZWlnaHQoKSArIHBhcnNlSW50KCBfc2l0ZVRpdGxlLmNzcyggJ21hcmdpbi1ib3R0b20nICkgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGl0bGVIZWlnaHRJbmRlbnQgPSAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICggX2ZpbHRlci5oYXNDbGFzcyggJ2ZpeGVkJyApICl7XG4gICAgICAgICAgICAgICAgICAgIF9maWx0ZXJIZWlnaHRJbmRlbnQgPSBfZmlsdGVyLmlubmVySGVpZ2h0KCkgKyBwYXJzZUludCggX2ZpbHRlci5jc3MoICdtYXJnaW4tYm90dG9tJyApICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX2ZpbHRlckhlaWdodEluZGVudCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcGFkZGluZ1RvcCA9IF90aXRsZUhlaWdodEluZGVudCArIF9maWx0ZXJIZWlnaHRJbmRlbnQ7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAncGFkZGluZy10b3AnOiBwYWRkaW5nVG9wXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZEl0ZW1zID0gZnVuY3Rpb24oIGFyciApIHtcblxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0wOyBpIDwgYXJyLmxlbmd0aDsgaSsrICkge1xuICAgICAgICAgICAgICAgICAgICBfd29ya3NXcmFwLmFwcGVuZCgnPGRpdiBjbGFzcz1cImFsbC13b3Jrc19faXRlbSBhbGwtd29ya3NfX2l0ZW1fYWRkZWRcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9XCInICsgYXJyW2ldLmxpbmsgKyAnXCIgY2xhc3M9XCJhbGwtd29ya3NfX3BpY1wiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCcgKyBhcnJbaV0ucGljICsgJylcIj48L2E+JyArXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxsLXdvcmtzX19mb290ZXJcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiYWxsLXdvcmtzX19uYW1lXCI+JyArIGFycltpXS5uYW1lICsgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiYWxsLXdvcmtzX19pY29uXCI+JyArIGFycltpXS5pY29uICsgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiYWxsLXdvcmtzX19zcXVhcmVcIj4nICsgYXJyW2ldLnNxdWFyZSArICc8c3Bhbj5tPHNwYW4+Mjwvc3Bhbj48L3NwYW4+PC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGEgaHJlZj1cIicgKyBhcnJbaV0ubGluayArICdcIiBjbGFzcz1cImJ0biBidG5fMlwiPjwvYT4nICtcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvZGl2PicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICQoICcuYWxsLXdvcmtzX19pdGVtJykucmVtb3ZlQ2xhc3MoICdhbGwtd29ya3NfX2l0ZW1fYWRkZWQnICk7XG5cbiAgICAgICAgICAgICAgICB9LCA1MCApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NhbGN1bGF0ZVZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF90aXRsZUhlaWdodCA9IF9zaXRlVGl0bGUuaW5uZXJIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICBfZmlsdGVySGVpZ2h0ID0gX2ZpbHRlci5pbm5lckhlaWdodCgpO1xuICAgICAgICAgICAgICAgIF9zY3JvbGxUb3AgPSBfd2luZG93LnNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgICAgIF9maWx0ZXJGaXhlZCgpO1xuICAgICAgICAgICAgICAgIF90aXRsZUZpeGVkKCk7XG4gICAgICAgICAgICAgICAgX2FkZFBhZGRpbmcoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZmlsdGVyRml4ZWQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIGlmICggX3Njcm9sbFRvcCA+PSBfZmlsdGVyUG9zVG9wIC0gX3RpdGxlSGVpZ2h0ICl7XG4gICAgICAgICAgICAgICAgICAgIF9maWx0ZXIuYWRkQ2xhc3MoICdmaXhlZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgX2ZpbHRlci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogX3RpdGxlSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfZmlsdGVyLnJlbW92ZUNsYXNzKCAnZml4ZWQnICk7XG4gICAgICAgICAgICAgICAgICAgIF9maWx0ZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICcnXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2VuZEFqYXggPSBmdW5jdGlvbihjYW5SZW1vdmVQcm9qZWN0cykge1xuXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAkKCdib2R5JykuZGF0YSgnYWN0aW9uJyksXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbiA6IFwiZ2V0X3Bvc3RzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJEYXRhOiAkKCAnLmZpbHRlcicgKS5zZXJpYWxpemUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBjdXJyZW50UGFnZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNhblJlbW92ZVByb2plY3RzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hbGwtd29ya3NfX2l0ZW0nKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2FkZXIucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZEl0ZW1zKG1zZy5pdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG1zZy5jb2wgPiAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhbkFkZFByb2plY3RzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhbkFkZFByb2plY3RzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoXCJFUlJPUiEhIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3RpdGxlRml4ZWQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIGlmICggX3Njcm9sbFRvcCA+IF90aXRsZVBvc1RvcCApe1xuICAgICAgICAgICAgICAgICAgICBfc2l0ZVRpdGxlLmFkZENsYXNzKCAnZml4ZWQnICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3NpdGVUaXRsZS5yZW1vdmVDbGFzcyggJ2ZpeGVkJyApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9jYWxjdWxhdGVWYWx1ZXMoKTtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcblxuICAgIH07XG5cbiAgICB2YXIgRmlsdGVyID0gZnVuY3Rpb24oIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pdGVtID0gX29iai5maW5kKCAnaW5wdXQnICk7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9pdGVtLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL19vYmouc3VibWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuXG4gICAgfTtcblxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
