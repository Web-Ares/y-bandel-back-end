"use strict";
$(function () {
    $(function () {
        $(".site__header").each(function () {
            new n($(this))
        }), $(".main").each(function () {
            new i($(this))
        }), $(".project__slider").each(function () {
            new t($(this))
        }), $(".project__pic").each(function () {
            $(".project__pic-wrap > a").fancybox({padding: 0})
        }), $(".form-validation").each(function () {
            new e($(this))
        }), $(".all-works").each(function () {
            new o($(this))
        }), $(".filter").each(function () {
            new a($(this))
        }), $(".wpcf7 input").on({
            focus: function () {
                $(this).parent().find(".wpcf7-not-valid-tip").remove()
            }
        }), $(document).on("mailsent.wpcf7", function () {
            console.log("mailsent.wpcf7 was triggered!")
        })
    });
    var n = function (n) {
        var i = n, t = $(".menu__close, .menu-btn"), e = !1, o = function () {
            $(window).on({
                resize: function () {
                    s()
                }
            }), t.on({
                click: function () {
                    i.toggleClass("open"), t.toggleClass("open")
                }
            })
        }, a = function () {
            i.niceScroll({
                cursorcolor: "#fff",
                railalign: "right",
                cursorwidth: 3,
                cursorborder: 0,
                autohidemode: !1,
                railpadding: {top: 0, right: 0, left: 0, bottom: 0}
            })
        }, s = function () {
            e ? $(window).width() > 1023 ? i.getNiceScroll().resize() : (i.getNiceScroll().remove(), i.removeClass("site__header_nice-scroll"), e = !1) : $(window).width() > 1023 && (a(), i.addClass("site__header_nice-scroll"), e = !0)
        }, r = function () {
            o(), s()
        };
        r()
    }, i = function (n) {
        var i = n, t = n.find(".main__slider-next"), e = n.find(".main__slider-prev"), o = i.find(".main__slider"), a = null, s = 1, r = n.find(".main__clients-pagination"), c = i.find(".main__clients"), l = null, f = 5e3, d = 1, u = function () {
        }, p = function () {
            a = new Swiper(o.find(".swiper-container"), {
                nextButton: t,
                prevButton: e,
                autoplay: 7e3,
                slidesPerView: s,
                loop: !0
            })
        }, _ = function () {
            l = new Swiper(c.find(".swiper-container"), {
                pagination: r,
                slidesPerView: d,
                loop: !0,
                autoplay: f,
                paginationClickable: !0
            })
        }, w = function () {
            u(), p(), _()
        };
        w()
    }, t = function (n) {
        var i = n, t = n.find(".project__slider-next"), e = n.find(".project__slider-prev"), o = null, a = 1, s = function () {
        }, r = function () {
            o = new Swiper(i.find(".swiper-container"), {nextButton: t, prevButton: e, slidesPerView: a, loop: !0})
        }, c = function () {
            s(), r()
        };
        c()
    }, e = function (n) {
        var i = this, t = n, e = t.attr("action"), o = t.find("[required]"), a = new XMLHttpRequest, s = function () {
            t.on({
                submit: function () {
                    return $.each(o, function () {
                        var n = $(this), i = n.attr("type");
                        if ("" == n.val() && n.parent().addClass("form-validation__error"), "email" == i) {
                            var t = /^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;
                            0 == t.test(n.val()) && n.parent().addClass("form-validation__error")
                        }
                    }), t.find(".form-validation__error").length ? !1 : (r(), !1)
                }
            }), o.on({
                focus: function () {
                    var n = $(this);
                    n.parent().hasClass("form-validation__error") && n.parent().removeClass("form-validation__error")
                }
            })
        }, r = function () {
            a.abort(), a = $.ajax({
                url: e,
                data: t.serialize(),
                dataType: "html",
                timeout: 2e4,
                type: "get",
                success: function () {
                    t.addClass("site__form-success")
                },
                error: function (n) {
                    "abort" != n.statusText && alert("Error!")
                }
            })
        }, c = function () {
            s(), t[0].obj = i
        };
        c()
    }, o = function (n) {
        var i = this, t = n, e = t.find(".site__title"), o = e.offset().top, a = e.innerHeight(), s = 0, r = t.find(".filter"), c = t.find("input"), l = r.offset().top, f = r.innerHeight(), d = 0, u = $(window), p = u.scrollTop(), _ = !0, w = t.find(".all-works__wrap"), h = t.find(".all-works__loader"), m = 1, v = function () {
            u.on({
                load: function () {
                    o = e.offset().top, l = r.offset().top, b()
                }, scroll: function () {
                    b(), p + u.height() > w.offset().top + w.height() && _ && (_ = !1, h.addClass("active"), x(!1))
                }, resize: function () {
                    o = e.offset().top, l = r.offset().top, b()
                }
            }), c.on({
                change: function () {
                    _ = !1, m = 0, h.addClass("active"), x(!0)
                }
            })
        }, g = function () {
            var n;
            s = e.hasClass("fixed") ? e.innerHeight() + parseInt(e.css("margin-bottom")) : 0, d = r.hasClass("fixed") ? r.innerHeight() + parseInt(r.css("margin-bottom")) : 0, n = s + d, t.css({"padding-top": n})
        }, C = function (n) {
            for (var i = 0; i < n.length; i++)w.append('<div class="all-works__item all-works__item_added"><a href="' + n[i].link + '" class="all-works__pic" style="background-image: url(' + n[i].pic + ')"></a><div class="all-works__footer"><span class="all-works__name">' + n[i].name + '</span><span class="all-works__icon">' + n[i].icon + '</span><span class="all-works__square">' + n[i].square + '<span>m<span>2</span></span></span><a href="' + n[i].link + '" class="btn btn_2"></a></div></div>');
            setTimeout(function () {
                $(".all-works__item").removeClass("all-works__item_added")
            }, 50)
        }, b = function () {
            a = e.innerHeight(), f = r.innerHeight(), p = u.scrollTop(), k(), j(), g()
        }, k = function () {
            p >= l - a ? (r.addClass("fixed"), r.css({top: a})) : (r.removeClass("fixed"), r.css({top: ""}))
        }, x = function (n) {
            $.ajax({
                url: $("body").data("action"),
                data: {action: "get_posts", filterData: $(".filter").serialize(), currentPage: m},
                dataType: "json",
                type: "get",
                success: function (i) {
                    n && $(".all-works__item").remove(), h.removeClass("active"), C(i.items), i.col > 0 ? (m++, _ = !0) : _ = !1
                },
                error: function (n) {
                    "abort" != n.statusText
                }
            })
        }, j = function () {
            p > o ? e.addClass("fixed") : e.removeClass("fixed")
        }, y = function () {
            b(), v(), t[0].obj = i
        };
        y()
    }, a = function (n) {
        var i = this, t = n, e = t.find("input"), o = function () {
            e.on({
                change: function () {
                }
            })
        }, a = function () {
            o(),
                t[0].obj = i
        };
        a()
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiZWFjaCIsIk1lbnUiLCJ0aGlzIiwiTWFpbiIsIlByb2plY3RTbGlkZXIiLCJmYW5jeWJveCIsInBhZGRpbmciLCJGb3JtVmFsaWRhdGlvbiIsIkFsbFdvcmtzIiwiRmlsdGVyIiwib24iLCJmb2N1cyIsInBhcmVudCIsImZpbmQiLCJyZW1vdmUiLCJkb2N1bWVudCIsImNvbnNvbGUiLCJsb2ciLCJvYmoiLCJfb2JqIiwiX2J0bnMiLCJfc2Nyb2xsQWRkZWQiLCJfYWRkRXZlbnRzIiwid2luZG93IiwicmVzaXplIiwiX2NhbkFkZFNjcm9sbCIsImNsaWNrIiwidG9nZ2xlQ2xhc3MiLCJfYWRkU2Nyb2xsIiwibmljZVNjcm9sbCIsImN1cnNvcmNvbG9yIiwicmFpbGFsaWduIiwiY3Vyc29yd2lkdGgiLCJjdXJzb3Jib3JkZXIiLCJhdXRvaGlkZW1vZGUiLCJyYWlscGFkZGluZyIsInRvcCIsInJpZ2h0IiwibGVmdCIsImJvdHRvbSIsIndpZHRoIiwiZ2V0TmljZVNjcm9sbCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJfaW5pdCIsIl9uZXh0QnRuIiwiX3ByZXZCdG4iLCJfbWFpblNsaWRlcldyYXAiLCJfbWFpblNsaWRlciIsIl9wZXJWaWV3IiwiX3BhZ2luYXRpb25DbGllbnRzIiwiX21haW5TbGlkZXJDbGllbnRzV3JhcCIsIl9tYWluU2xpZGVyQ2xpZW50cyIsIl9kdXJhdGlvbiIsIl9wZXJWaWV3Q2xpZW50cyIsIl9hZGRNYWluU2xpZGVyIiwiU3dpcGVyIiwibmV4dEJ1dHRvbiIsInByZXZCdXR0b24iLCJhdXRvcGxheSIsInNsaWRlc1BlclZpZXciLCJsb29wIiwiX2FkZE1haW5TbGlkZXJDbGllbnRzIiwicGFnaW5hdGlvbiIsInBhZ2luYXRpb25DbGlja2FibGUiLCJfYWRkU2xpZGVyIiwiX3NlbGYiLCJfcGF0aCIsImF0dHIiLCJfaW5wdXRzIiwiX3JlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsInN1Ym1pdCIsImN1ckl0ZW0iLCJjdXJBdHRyIiwidmFsIiwicGF0dGVybiIsInRlc3QiLCJsZW5ndGgiLCJfYWpheFJlcXVlc3QiLCJoYXNDbGFzcyIsImFib3J0IiwiYWpheCIsInVybCIsImRhdGEiLCJzZXJpYWxpemUiLCJkYXRhVHlwZSIsInRpbWVvdXQiLCJ0eXBlIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzVGV4dCIsImFsZXJ0IiwiX3NpdGVUaXRsZSIsIl90aXRsZVBvc1RvcCIsIm9mZnNldCIsIl90aXRsZUhlaWdodCIsImlubmVySGVpZ2h0IiwiX3RpdGxlSGVpZ2h0SW5kZW50IiwiX2ZpbHRlciIsIl9maWx0ZXJJdGVtIiwiX2ZpbHRlclBvc1RvcCIsIl9maWx0ZXJIZWlnaHQiLCJfZmlsdGVySGVpZ2h0SW5kZW50IiwiX3dpbmRvdyIsIl9zY3JvbGxUb3AiLCJzY3JvbGxUb3AiLCJfY2FuQWRkUHJvamVjdHMiLCJfd29ya3NXcmFwIiwiX2xvYWRlciIsImN1cnJlbnRQYWdlIiwibG9hZCIsIl9jYWxjdWxhdGVWYWx1ZXMiLCJzY3JvbGwiLCJoZWlnaHQiLCJfc2VuZEFqYXgiLCJjaGFuZ2UiLCJfYWRkUGFkZGluZyIsInBhZGRpbmdUb3AiLCJwYXJzZUludCIsImNzcyIsInBhZGRpbmctdG9wIiwiX2FkZEl0ZW1zIiwiYXJyIiwiaSIsImFwcGVuZCIsImxpbmsiLCJwaWMiLCJuYW1lIiwiaWNvbiIsInNxdWFyZSIsInNldFRpbWVvdXQiLCJfZmlsdGVyRml4ZWQiLCJfdGl0bGVGaXhlZCIsImNhblJlbW92ZVByb2plY3RzIiwiYWN0aW9uIiwiZmlsdGVyRGF0YSIsIm1zZyIsIml0ZW1zIiwiY29sIiwiX2l0ZW0iXSwibWFwcGluZ3MiOiJBQUFBLFlBQUFBLEdBQUUsV0FHRUEsRUFBRSxXQUVFQSxFQUFFLGlCQUFpQkMsS0FBTSxXQUNyQixHQUFJQyxHQUFNRixFQUFFRyxTQUdoQkgsRUFBRSxTQUFTQyxLQUFNLFdBQ2IsR0FBSUcsR0FBTUosRUFBRUcsU0FHaEJILEVBQUUsb0JBQW9C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aW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uKCl7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgJChmdW5jdGlvbigpe1xuXG4gICAgICAgICQoJy5zaXRlX19oZWFkZXInKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5ldyBNZW51KCAkKHRoaXMpICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCcubWFpbicpLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmV3IE1haW4oICQodGhpcykgKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5wcm9qZWN0X19zbGlkZXInKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5ldyBQcm9qZWN0U2xpZGVyKCAkKHRoaXMpICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCcucHJvamVjdF9fcGljJykuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKFwiLnByb2plY3RfX3BpYy13cmFwID4gYVwiKS5mYW5jeWJveCh7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCcuZm9ybS12YWxpZGF0aW9uJykuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuZXcgRm9ybVZhbGlkYXRpb24oICQodGhpcykgKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5hbGwtd29ya3MnKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5ldyBBbGxXb3JrcyggJCh0aGlzKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLmZpbHRlcicpLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmV3IEZpbHRlciggJCh0aGlzKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCggJy53cGNmNyBpbnB1dCcpLm9uKCB7XG4gICAgICAgICAgICAnZm9jdXMnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy53cGNmNy1ub3QtdmFsaWQtdGlwJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbignbWFpbHNlbnQud3BjZjcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbWFpbHNlbnQud3BjZjcgd2FzIHRyaWdnZXJlZCEnKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIHZhciBNZW51ID0gZnVuY3Rpb24oIG9iaiApIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9idG5zPSAkKCcubWVudV9fY2xvc2UsIC5tZW51LWJ0bicpLFxuICAgICAgICAgICAgX3Njcm9sbEFkZGVkID0gZmFsc2U7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgICdyZXNpemUnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYW5BZGRTY3JvbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9idG5zLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoudG9nZ2xlQ2xhc3MoICdvcGVuJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2J0bnMudG9nZ2xlQ2xhc3MoICdvcGVuJyApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZFNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmoubmljZVNjcm9sbCh7XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcmNvbG9yOiBcIiNmZmZcIixcbiAgICAgICAgICAgICAgICAgICAgcmFpbGFsaWduOiAncmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICBjdXJzb3J3aWR0aDogMyxcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yYm9yZGVyOiAwLFxuICAgICAgICAgICAgICAgICAgICBhdXRvaGlkZW1vZGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICByYWlscGFkZGluZzoge3RvcDogMCwgcmlnaHQ6IDAsIGxlZnQ6IDAsIGJvdHRvbTogMH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2FuQWRkU2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBfc2Nyb2xsQWRkZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggJCggd2luZG93ICkud2lkdGgoKSA+IDEwMjMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmdldE5pY2VTY3JvbGwoKS5yZXNpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZ2V0TmljZVNjcm9sbCgpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3NpdGVfX2hlYWRlcl9uaWNlLXNjcm9sbCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zY3JvbGxBZGRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAkKCB3aW5kb3cgKS53aWR0aCgpID4gMTAyMyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hZGRTY3JvbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdzaXRlX19oZWFkZXJfbmljZS1zY3JvbGwnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2Nyb2xsQWRkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfY2FuQWRkU2Nyb2xsKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBNYWluID0gZnVuY3Rpb24ob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfbmV4dEJ0biA9IG9iai5maW5kKCAnLm1haW5fX3NsaWRlci1uZXh0JyApLFxuICAgICAgICAgICAgX3ByZXZCdG4gPSBvYmouZmluZCggJy5tYWluX19zbGlkZXItcHJldicgKSxcbiAgICAgICAgICAgIF9tYWluU2xpZGVyV3JhcCA9IF9vYmouZmluZCgnLm1haW5fX3NsaWRlcicpLFxuICAgICAgICAgICAgX21haW5TbGlkZXIgPSBudWxsLFxuICAgICAgICAgICAgX3BlclZpZXcgPSAxLFxuICAgICAgICAgICAgX3BhZ2luYXRpb25DbGllbnRzID0gb2JqLmZpbmQoICcubWFpbl9fY2xpZW50cy1wYWdpbmF0aW9uJyApLFxuICAgICAgICAgICAgX21haW5TbGlkZXJDbGllbnRzV3JhcCA9IF9vYmouZmluZCgnLm1haW5fX2NsaWVudHMnKSxcbiAgICAgICAgICAgIF9tYWluU2xpZGVyQ2xpZW50cyA9IG51bGwsXG4gICAgICAgICAgICBfZHVyYXRpb24gPSA1MDAwLFxuICAgICAgICAgICAgX3BlclZpZXdDbGllbnRzID0gMTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWRkTWFpblNsaWRlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX21haW5TbGlkZXIgPSBuZXcgU3dpcGVyKCBfbWFpblNsaWRlcldyYXAuZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApLCB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRCdXR0b246IF9uZXh0QnRuLFxuICAgICAgICAgICAgICAgICAgICBwcmV2QnV0dG9uOiBfcHJldkJ0bixcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IDcwMDAsXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IF9wZXJWaWV3LFxuICAgICAgICAgICAgICAgICAgICBsb29wOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZE1haW5TbGlkZXJDbGllbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfbWFpblNsaWRlckNsaWVudHMgPSBuZXcgU3dpcGVyKCBfbWFpblNsaWRlckNsaWVudHNXcmFwLmZpbmQoICcuc3dpcGVyLWNvbnRhaW5lcicgKSwge1xuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiBfcGFnaW5hdGlvbkNsaWVudHMsXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IF9wZXJWaWV3Q2xpZW50cyxcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IF9kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbkNsaWNrYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9hZGRNYWluU2xpZGVyKCk7XG4gICAgICAgICAgICAgICAgX2FkZE1haW5TbGlkZXJDbGllbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFByb2plY3RTbGlkZXIgPSBmdW5jdGlvbihvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9uZXh0QnRuID0gb2JqLmZpbmQoICcucHJvamVjdF9fc2xpZGVyLW5leHQnICksXG4gICAgICAgICAgICBfcHJldkJ0biA9IG9iai5maW5kKCAnLnByb2plY3RfX3NsaWRlci1wcmV2JyApLFxuICAgICAgICAgICAgX21haW5TbGlkZXIgPSBudWxsLFxuICAgICAgICAgICAgX3BlclZpZXcgPSAxO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRTbGlkZXIgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9tYWluU2xpZGVyID0gbmV3IFN3aXBlciggX29iai5maW5kKCAnLnN3aXBlci1jb250YWluZXInICksIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX25leHRCdG4sXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9wcmV2QnRuLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBfcGVyVmlldyxcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9hZGRTbGlkZXIoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgRm9ybVZhbGlkYXRpb24gPSBmdW5jdGlvbiggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3BhdGggPSBfb2JqLmF0dHIoICdhY3Rpb24nICksXG4gICAgICAgICAgICBfaW5wdXRzID0gX29iai5maW5kKCAnW3JlcXVpcmVkXScgKSxcbiAgICAgICAgICAgIC8vX3NlbnRNZXNzYWdlTWFyayA9IF9vYmouZmluZCggJy5zaXRlX19mb3JtLXNlbnQnICksXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqLm9uKHtcblxuICAgICAgICAgICAgICAgICAgICAnc3VibWl0JzogZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCBfaW5wdXRzLCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKCB0aGlzICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckF0dHIgPSBjdXJJdGVtLmF0dHIoICd0eXBlJyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjdXJJdGVtLnZhbCgpID09ICcnICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLnBhcmVudCgpLmFkZENsYXNzKCAnZm9ybS12YWxpZGF0aW9uX19lcnJvcicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ckF0dHIgPT0gJ2VtYWlsJyApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9IC9eKFthLXowLTlfXFwuLV0pK0BbYS16MC05LV0rXFwuKFthLXpdezIsNH1cXC4pP1thLXpdezIsNH0kL2k7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGF0dGVybi50ZXN0KCBjdXJJdGVtLnZhbCgpICkgPT0gZmFsc2UgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucGFyZW50KCkuYWRkQ2xhc3MoICdmb3JtLXZhbGlkYXRpb25fX2Vycm9yJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggX29iai5maW5kKCAnLmZvcm0tdmFsaWRhdGlvbl9fZXJyb3InICkubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FqYXhSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF9pbnB1dHMub24oe1xuXG4gICAgICAgICAgICAgICAgICAgICdmb2N1cyc6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0ucGFyZW50KCkuaGFzQ2xhc3MoICdmb3JtLXZhbGlkYXRpb25fX2Vycm9yJyApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucGFyZW50KCkucmVtb3ZlQ2xhc3MoICdmb3JtLXZhbGlkYXRpb25fX2Vycm9yJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FqYXhSZXF1ZXN0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIF9yZXF1ZXN0ID0gJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBfcGF0aCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogX29iai5zZXJpYWxpemUoKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMjAwMDAsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9fb2JqLnRyaWdnZXIoICdyZXNldCcgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3NpdGVfX2Zvcm0tc3VjY2VzcycgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiAoIF9zZW50TWVzc2FnZU1hcmsubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgX3NlbnRNZXNzYWdlTWFyay5hZGRDbGFzcyggJ3NpdGVfX2Zvcm0tc2VudF9zaG93JyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoIFhNTEh0dHBSZXF1ZXN0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gXCJhYm9ydFwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCAnRXJyb3IhJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuXG4gICAgfTtcblxuICAgIHZhciBBbGxXb3JrcyA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3NpdGVUaXRsZSA9IF9vYmouZmluZCggJy5zaXRlX190aXRsZScgKSxcbiAgICAgICAgICAgIF90aXRsZVBvc1RvcCA9IF9zaXRlVGl0bGUub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgX3RpdGxlSGVpZ2h0ID0gX3NpdGVUaXRsZS5pbm5lckhlaWdodCgpLFxuICAgICAgICAgICAgX3RpdGxlSGVpZ2h0SW5kZW50ID0gMCxcbiAgICAgICAgICAgIF9maWx0ZXIgPSBfb2JqLmZpbmQoICcuZmlsdGVyJyApLFxuICAgICAgICAgICAgX2ZpbHRlckl0ZW0gPSBfb2JqLmZpbmQoICdpbnB1dCcgKSxcbiAgICAgICAgICAgIF9maWx0ZXJQb3NUb3AgPSBfZmlsdGVyLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgIF9maWx0ZXJIZWlnaHQgPSBfZmlsdGVyLmlubmVySGVpZ2h0KCksXG4gICAgICAgICAgICBfZmlsdGVySGVpZ2h0SW5kZW50ID0gMCxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF9zY3JvbGxUb3AgPSBfd2luZG93LnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgX2NhbkFkZFByb2plY3RzID0gdHJ1ZSxcbiAgICAgICAgICAgIF93b3Jrc1dyYXAgPSBfb2JqLmZpbmQoJy5hbGwtd29ya3NfX3dyYXAnKSxcbiAgICAgICAgICAgIF9sb2FkZXIgPSBfb2JqLmZpbmQoICcuYWxsLXdvcmtzX19sb2FkZXInKSxcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlID0gMTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oe1xuICAgICAgICAgICAgICAgICAgICAnbG9hZCc6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGl0bGVQb3NUb3AgPSBfc2l0ZVRpdGxlLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9maWx0ZXJQb3NUb3AgPSBfZmlsdGVyLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYWxjdWxhdGVWYWx1ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3Njcm9sbCc6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FsY3VsYXRlVmFsdWVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIChfc2Nyb2xsVG9wICsgX3dpbmRvdy5oZWlnaHQoKSApID4gKF93b3Jrc1dyYXAub2Zmc2V0KCkudG9wICsgX3dvcmtzV3JhcC5oZWlnaHQoKSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfY2FuQWRkUHJvamVjdHMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYW5BZGRQcm9qZWN0cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9hZGVyLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbmRBamF4KCBmYWxzZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3Jlc2l6ZSc6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGl0bGVQb3NUb3AgPSBfc2l0ZVRpdGxlLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9maWx0ZXJQb3NUb3AgPSBfZmlsdGVyLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYWxjdWxhdGVWYWx1ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgX2ZpbHRlckl0ZW0ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NoYW5nZSc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NhbkFkZFByb2plY3RzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9hZGVyLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZW5kQWpheCggdHJ1ZSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZFBhZGRpbmcgPSBmdW5jdGlvbigpICB7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFkZGluZ1RvcDtcblxuICAgICAgICAgICAgICAgIGlmICggX3NpdGVUaXRsZS5oYXNDbGFzcyggJ2ZpeGVkJyApICl7XG4gICAgICAgICAgICAgICAgICAgIF90aXRsZUhlaWdodEluZGVudCA9IF9zaXRlVGl0bGUuaW5uZXJIZWlnaHQoKSArIHBhcnNlSW50KCBfc2l0ZVRpdGxlLmNzcyggJ21hcmdpbi1ib3R0b20nICkgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGl0bGVIZWlnaHRJbmRlbnQgPSAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICggX2ZpbHRlci5oYXNDbGFzcyggJ2ZpeGVkJyApICl7XG4gICAgICAgICAgICAgICAgICAgIF9maWx0ZXJIZWlnaHRJbmRlbnQgPSBfZmlsdGVyLmlubmVySGVpZ2h0KCkgKyBwYXJzZUludCggX2ZpbHRlci5jc3MoICdtYXJnaW4tYm90dG9tJyApICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX2ZpbHRlckhlaWdodEluZGVudCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcGFkZGluZ1RvcCA9IF90aXRsZUhlaWdodEluZGVudCArIF9maWx0ZXJIZWlnaHRJbmRlbnQ7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAncGFkZGluZy10b3AnOiBwYWRkaW5nVG9wXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZEl0ZW1zID0gZnVuY3Rpb24oIGFyciApIHtcblxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0wOyBpIDwgYXJyLmxlbmd0aDsgaSsrICkge1xuICAgICAgICAgICAgICAgICAgICBfd29ya3NXcmFwLmFwcGVuZCgnPGRpdiBjbGFzcz1cImFsbC13b3Jrc19faXRlbSBhbGwtd29ya3NfX2l0ZW1fYWRkZWRcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9XCInICsgYXJyW2ldLmxpbmsgKyAnXCIgY2xhc3M9XCJhbGwtd29ya3NfX3BpY1wiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCcgKyBhcnJbaV0ucGljICsgJylcIj48L2E+JyArXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxsLXdvcmtzX19mb290ZXJcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiYWxsLXdvcmtzX19uYW1lXCI+JyArIGFycltpXS5uYW1lICsgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiYWxsLXdvcmtzX19pY29uXCI+JyArIGFycltpXS5pY29uICsgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiYWxsLXdvcmtzX19zcXVhcmVcIj4nICsgYXJyW2ldLnNxdWFyZSArICc8c3Bhbj5tPHNwYW4+Mjwvc3Bhbj48L3NwYW4+PC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGEgaHJlZj1cIicgKyBhcnJbaV0ubGluayArICdcIiBjbGFzcz1cImJ0biBidG5fMlwiPjwvYT4nICtcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvZGl2PicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICQoICcuYWxsLXdvcmtzX19pdGVtJykucmVtb3ZlQ2xhc3MoICdhbGwtd29ya3NfX2l0ZW1fYWRkZWQnICk7XG5cbiAgICAgICAgICAgICAgICB9LCA1MCApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NhbGN1bGF0ZVZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF90aXRsZUhlaWdodCA9IF9zaXRlVGl0bGUuaW5uZXJIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICBfZmlsdGVySGVpZ2h0ID0gX2ZpbHRlci5pbm5lckhlaWdodCgpO1xuICAgICAgICAgICAgICAgIF9zY3JvbGxUb3AgPSBfd2luZG93LnNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgICAgIF9maWx0ZXJGaXhlZCgpO1xuICAgICAgICAgICAgICAgIF90aXRsZUZpeGVkKCk7XG4gICAgICAgICAgICAgICAgX2FkZFBhZGRpbmcoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZmlsdGVyRml4ZWQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIGlmICggX3Njcm9sbFRvcCA+PSBfZmlsdGVyUG9zVG9wIC0gX3RpdGxlSGVpZ2h0ICl7XG4gICAgICAgICAgICAgICAgICAgIF9maWx0ZXIuYWRkQ2xhc3MoICdmaXhlZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgX2ZpbHRlci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogX3RpdGxlSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfZmlsdGVyLnJlbW92ZUNsYXNzKCAnZml4ZWQnICk7XG4gICAgICAgICAgICAgICAgICAgIF9maWx0ZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICcnXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2VuZEFqYXggPSBmdW5jdGlvbihjYW5SZW1vdmVQcm9qZWN0cykge1xuXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAkKCdib2R5JykuZGF0YSgnYWN0aW9uJyksXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbiA6IFwiZ2V0X3Bvc3RzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJEYXRhOiAkKCAnLmZpbHRlcicgKS5zZXJpYWxpemUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBjdXJyZW50UGFnZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNhblJlbW92ZVByb2plY3RzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hbGwtd29ya3NfX2l0ZW0nKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2FkZXIucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZEl0ZW1zKG1zZy5pdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG1zZy5jb2wgPiAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhbkFkZFByb2plY3RzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhbkFkZFByb2plY3RzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoXCJFUlJPUiEhIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3RpdGxlRml4ZWQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIGlmICggX3Njcm9sbFRvcCA+IF90aXRsZVBvc1RvcCApe1xuICAgICAgICAgICAgICAgICAgICBfc2l0ZVRpdGxlLmFkZENsYXNzKCAnZml4ZWQnICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3NpdGVUaXRsZS5yZW1vdmVDbGFzcyggJ2ZpeGVkJyApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9jYWxjdWxhdGVWYWx1ZXMoKTtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcblxuICAgIH07XG5cbiAgICB2YXIgRmlsdGVyID0gZnVuY3Rpb24oIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pdGVtID0gX29iai5maW5kKCAnaW5wdXQnICk7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9pdGVtLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL19vYmouc3VibWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuXG4gICAgfTtcblxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
