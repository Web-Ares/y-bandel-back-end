"use strict";$(function(){$(function(){$(".site__header").each(function(){new n($(this))}),$(".main").each(function(){new i($(this))}),$(".project__slider").each(function(){new t($(this))}),$(".form-validation").each(function(){new e($(this))}),$(".all-works").each(function(){new o($(this))}),$(".filter").each(function(){new r($(this))})});var n=function(n){var i=n,t=$(".menu__close, .menu-btn"),e=!1,o=function(){$(window).on({resize:function(){a()}}),t.on({click:function(){i.toggleClass("open"),t.toggleClass("open")}})},r=function(){i.niceScroll({cursorcolor:"#fff",railalign:"right",cursorwidth:3,cursorborder:0,autohidemode:!1,railpadding:{top:0,right:0,left:0,bottom:0}})},a=function(){e?$(window).width()>1023?i.getNiceScroll().resize():(i.getNiceScroll().remove(),i.removeClass("site__header_nice-scroll"),e=!1):$(window).width()>1023&&(r(),i.addClass("site__header_nice-scroll"),e=!0)},s=function(){o(),a()};s()},i=function(n){var i=n,t=n.find(".main__slider-next"),e=n.find(".main__slider-prev"),o=i.find(".main__slider"),r=null,a=1,s=n.find(".main__clients-pagination"),c=i.find(".main__clients"),f=null,l=5e3,u=1,d=function(){},p=function(){r=new Swiper(o.find(".swiper-container"),{nextButton:t,prevButton:e,slidesPerView:a,loop:!0})},_=function(){f=new Swiper(c.find(".swiper-container"),{pagination:s,slidesPerView:u,loop:!0,autoplay:l,paginationClickable:!0})},h=function(){d(),p(),_()};h()},t=function(n){var i=n,t=n.find(".project__slider-next"),e=n.find(".project__slider-prev"),o=null,r=1,a=function(){},s=function(){o=new Swiper(i.find(".swiper-container"),{nextButton:t,prevButton:e,slidesPerView:r,loop:!0})},c=function(){a(),s()};c()},e=function(n){var i=this,t=n,e=t.attr("action"),o=t.find("[required]"),r=t.find(".site__form-sent"),a=new XMLHttpRequest,s=function(){t.on({submit:function(){return $.each(o,function(){var n=$(this),i=n.attr("type");if(""==n.val()&&n.parent().addClass("form-validation__error"),"email"==i){var t=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;0==t.test(n.val())&&n.parent().addClass("form-validation__error")}}),t.find(".form-validation__error").length?!1:(c(),!1)}}),o.on({focus:function(){var n=$(this);n.parent().hasClass("form-validation__error")&&n.parent().removeClass("form-validation__error")}})},c=function(){a.abort(),a=$.ajax({url:e,data:t.serialize(),dataType:"html",timeout:2e4,type:"get",success:function(){r.length&&r.addClass("site__form-sent_show")},error:function(n){"abort"!=n.statusText&&alert("Error!")}})},f=function(){s(),t[0].obj=i};f()},o=function(n){var i=this,t=n,e=t.find(".site__title"),o=e.offset().top,r=e.innerHeight(),a=0,s=t.find(".filter"),c=s.offset().top,f=s.innerHeight(),l=0,u=$(window),d=u.scrollTop(),p=function(){u.on({load:function(){o=e.offset().top,c=s.offset().top,h()},scroll:function(){h()},resize:function(){o=e.offset().top,c=s.offset().top,h()}})},_=function(){var n;a=e.hasClass("fixed")?e.innerHeight()+parseInt(e.css("margin-bottom")):0,l=s.hasClass("fixed")?s.innerHeight()+parseInt(s.css("margin-bottom")):0,n=a+l,t.css({"padding-top":n})},h=function(){r=e.innerHeight(),f=s.innerHeight(),d=u.scrollTop(),w(),m(),_()},w=function(){d>=c-r?(s.addClass("fixed"),s.css({top:r})):(s.removeClass("fixed"),s.css({top:""}))},m=function(){d>o?e.addClass("fixed"):e.removeClass("fixed")},v=function(){h(),p(),t[0].obj=i};v()},r=function(n){var i=this,t=n,e=t.find(".filter__item"),o=[],r=(t.attr("action"),new XMLHttpRequest,function(){e.on({click:function(){o=[],$(this).toggleClass("active"),a()}})}),a=function(){e.each(function(){var n=$(this);n.hasClass("active")&&(o[o.length]=n.data("id"))}),console.log(o)},s=function(){r(),t[0].obj=i};s()}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiZWFjaCIsIk1lbnUiLCJ0aGlzIiwiTWFpbiIsIlByb2plY3RTbGlkZXIiLCJGb3JtVmFsaWRhdGlvbiIsIkFsbFdvcmtzIiwiRmlsdGVyIiwib2JqIiwiX29iaiIsIl9idG5zIiwiX3Njcm9sbEFkZGVkIiwiX2FkZEV2ZW50cyIsIndpbmRvdyIsIm9uIiwicmVzaXplIiwiX2NhbkFkZFNjcm9sbCIsImNsaWNrIiwidG9nZ2xlQ2xhc3MiLCJfYWRkU2Nyb2xsIiwibmljZVNjcm9sbCIsImN1cnNvcmNvbG9yIiwicmFpbGFsaWduIiwiY3Vyc29yd2lkdGgiLCJjdXJzb3Jib3JkZXIiLCJhdXRvaGlkZW1vZGUiLCJyYWlscGFkZGluZyIsInRvcCIsInJpZ2h0IiwibGVmdCIsImJvdHRvbSIsIndpZHRoIiwiZ2V0TmljZVNjcm9sbCIsInJlbW92ZSIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJfaW5pdCIsIl9uZXh0QnRuIiwiZmluZCIsIl9wcmV2QnRuIiwiX21haW5TbGlkZXJXcmFwIiwiX21haW5TbGlkZXIiLCJfcGVyVmlldyIsIl9wYWdpbmF0aW9uQ2xpZW50cyIsIl9tYWluU2xpZGVyQ2xpZW50c1dyYXAiLCJfbWFpblNsaWRlckNsaWVudHMiLCJfZHVyYXRpb24iLCJfcGVyVmlld0NsaWVudHMiLCJfYWRkTWFpblNsaWRlciIsIlN3aXBlciIsIm5leHRCdXR0b24iLCJwcmV2QnV0dG9uIiwic2xpZGVzUGVyVmlldyIsImxvb3AiLCJfYWRkTWFpblNsaWRlckNsaWVudHMiLCJwYWdpbmF0aW9uIiwiYXV0b3BsYXkiLCJwYWdpbmF0aW9uQ2xpY2thYmxlIiwiX2FkZFNsaWRlciIsIl9zZWxmIiwiX3BhdGgiLCJhdHRyIiwiX2lucHV0cyIsIl9zZW50TWVzc2FnZU1hcmsiLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0Iiwic3VibWl0IiwiY3VySXRlbSIsImN1ckF0dHIiLCJ2YWwiLCJwYXJlbnQiLCJwYXR0ZXJuIiwidGVzdCIsImxlbmd0aCIsIl9hamF4UmVxdWVzdCIsImZvY3VzIiwiaGFzQ2xhc3MiLCJhYm9ydCIsImFqYXgiLCJ1cmwiLCJkYXRhIiwic2VyaWFsaXplIiwiZGF0YVR5cGUiLCJ0aW1lb3V0IiwidHlwZSIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1c1RleHQiLCJhbGVydCIsIl9zaXRlVGl0bGUiLCJfdGl0bGVQb3NUb3AiLCJvZmZzZXQiLCJfdGl0bGVIZWlnaHQiLCJpbm5lckhlaWdodCIsIl90aXRsZUhlaWdodEluZGVudCIsIl9maWx0ZXIiLCJfZmlsdGVyUG9zVG9wIiwiX2ZpbHRlckhlaWdodCIsIl9maWx0ZXJIZWlnaHRJbmRlbnQiLCJfd2luZG93IiwiX3Njcm9sbFRvcCIsInNjcm9sbFRvcCIsImxvYWQiLCJfY2FsY3VsYXRlVmFsdWVzIiwic2Nyb2xsIiwiX2FkZFBhZGRpbmciLCJwYWRkaW5nVG9wIiwicGFyc2VJbnQiLCJjc3MiLCJwYWRkaW5nLXRvcCIsIl9maWx0ZXJGaXhlZCIsIl90aXRsZUZpeGVkIiwiX2l0ZW0iLCJfZGF0YUFycmF5IiwiX2NvbGxlY3RBdHRyaWJ1dGVzIiwiY3VyRWxlbSIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJBQUFBLFlBQUFBLEdBQUUsV0FHRUEsRUFBRSxXQUVFQSxFQUFFLGlCQUFpQkMsS0FBTSxXQUNyQixHQUFJQyxHQUFNRixFQUFFRyxTQUdoQkgsRUFBRSxTQUFTQyxLQUFNLFdBQ2IsR0FBSUcsR0FBTUosRUFBRUcsU0FHaEJILEVBQUUsb0JBQW9CQyxLQUFNLFdBQ3hCLEdBQUlJLEdBQWVMLEVBQUVHLFNBR3pCSCxFQUFFLG9CQUFvQkMsS0FBTSxXQUN4QixHQUFJSyxHQUFnQk4sRUFBRUcsU0FHMUJILEVBQUUsY0FBY0MsS0FBTSxXQUNsQixHQUFJTSxHQUFVUCxFQUFFRyxTQUdwQkgsRUFBRSxXQUFXQyxLQUFNLFdBQ2YsR0FBSU8sR0FBUVIsRUFBRUcsVUFLdEIsSUFBSUQsR0FBTyxTQUFVTyxHQUdqQixHQUFJQyxH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S21HLEtBQ0RDLGNBQWVILEtBSXZCSCxFQUFtQixXQUNmWCxFQUFlSCxFQUFXSSxjQUMxQkksRUFBZ0JGLEVBQVFGLGNBQ3hCTyxFQUFhRCxFQUFRRSxZQUNyQlMsSUFDQUMsSUFDQU4sS0FFSkssRUFBZSxXQUVOVixHQUFjSixFQUFnQkosR0FDL0JHLEVBQVE1RCxTQUFVLFNBQ2xCNEQsRUFBUWEsS0FDSmpGLElBQUtpRSxNQUdURyxFQUFRN0QsWUFBYSxTQUNyQjZELEVBQVFhLEtBQ0pqRixJQUFLLE9BS2pCb0YsRUFBYyxXQUVMWCxFQUFhVixFQUNkRCxFQUFXdEQsU0FBVSxTQUVyQnNELEVBQVd2RCxZQUFhLFVBSWhDRSxFQUFRLFdBQ0ptRSxJQUNBM0YsSUFDQUgsRUFBSyxHQUFHRCxJQUFNbUQsRUFHdEJ2QixNQUlBN0IsRUFBUyxTQUFXQyxHQUVwQixHQUFJbUQsR0FBUXpELEtBQ1JPLEVBQU9ELEVBQ1B3RyxFQUFRdkcsRUFBSzZCLEtBQU0saUJBQ25CMkUsS0FJQXJHLEdBSFFILEVBQUtvRCxLQUFNLFVBQ1IsR0FBSUksZ0JBRUYsV0FFVCtDLEVBQU1sRyxJQUNGRyxNQUFPLFdBQ0hnRyxLQUNBbEgsRUFBR0csTUFBT2dCLFlBQWEsVUFDdkJnRyxTQU1aQSxFQUFxQixXQUVqQkYsRUFBTWhILEtBQU0sV0FFUixHQUFJbUgsR0FBVXBILEVBQUdHLEtBQ1ppSCxHQUFRdkMsU0FBVSxZQUNuQnFDLEVBQVdBLEVBQVd4QyxRQUFVMEMsRUFBUW5DLEtBQU0sU0FLdERvQyxRQUFRQyxJQUFJSixJQUdoQjdFLEVBQVEsV0FDSnhCLElBQ0FILEVBQUssR0FBR0QsSUFBTW1ELEVBcUJ0QnZCIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgJChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAkKCcuc2l0ZV9faGVhZGVyJykuZWFjaCggZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG5ldyBNZW51KCAkKHRoaXMpICk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkKCcubWFpbicpLmVhY2goIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBuZXcgTWFpbiggJCh0aGlzKSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJCgnLnByb2plY3RfX3NsaWRlcicpLmVhY2goIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBuZXcgUHJvamVjdFNsaWRlciggJCh0aGlzKSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJCgnLmZvcm0tdmFsaWRhdGlvbicpLmVhY2goIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBuZXcgRm9ybVZhbGlkYXRpb24oICQodGhpcykgKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICQoJy5hbGwtd29ya3MnKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbmV3IEFsbFdvcmtzKCAkKHRoaXMpICk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkKCcuZmlsdGVyJykuZWFjaCggZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG5ldyBGaWx0ZXIoICQodGhpcykgKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiggb2JqICkge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfYnRucz0gJCgnLm1lbnVfX2Nsb3NlLCAubWVudS1idG4nKSxcclxuICAgICAgICAgICAgX3Njcm9sbEFkZGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHdpbmRvdykub24oIHtcclxuICAgICAgICAgICAgICAgICAgICAncmVzaXplJzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYW5BZGRTY3JvbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2J0bnMub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoudG9nZ2xlQ2xhc3MoICdvcGVuJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYnRucy50b2dnbGVDbGFzcyggJ29wZW4nICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2FkZFNjcm9sbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgX29iai5uaWNlU2Nyb2xsKHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3Jjb2xvcjogXCIjZmZmXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmFpbGFsaWduOiAncmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcndpZHRoOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcmJvcmRlcjogMCxcclxuICAgICAgICAgICAgICAgICAgICBhdXRvaGlkZW1vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJhaWxwYWRkaW5nOiB7dG9wOiAwLCByaWdodDogMCwgbGVmdDogMCwgYm90dG9tOiAwfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jYW5BZGRTY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICggX3Njcm9sbEFkZGVkICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggJCggd2luZG93ICkud2lkdGgoKSA+IDEwMjMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZ2V0TmljZVNjcm9sbCgpLnJlc2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZ2V0TmljZVNjcm9sbCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX25pY2Utc2Nyb2xsJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2Nyb2xsQWRkZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggJCggd2luZG93ICkud2lkdGgoKSA+IDEwMjMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hZGRTY3JvbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3NpdGVfX2hlYWRlcl9uaWNlLXNjcm9sbCcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Njcm9sbEFkZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgX2NhbkFkZFNjcm9sbCgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgTWFpbiA9IGZ1bmN0aW9uKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfbmV4dEJ0biA9IG9iai5maW5kKCAnLm1haW5fX3NsaWRlci1uZXh0JyApLFxyXG4gICAgICAgICAgICBfcHJldkJ0biA9IG9iai5maW5kKCAnLm1haW5fX3NsaWRlci1wcmV2JyApLFxyXG4gICAgICAgICAgICBfbWFpblNsaWRlcldyYXAgPSBfb2JqLmZpbmQoJy5tYWluX19zbGlkZXInKSxcclxuICAgICAgICAgICAgX21haW5TbGlkZXIgPSBudWxsLFxyXG4gICAgICAgICAgICBfcGVyVmlldyA9IDEsXHJcbiAgICAgICAgICAgIF9wYWdpbmF0aW9uQ2xpZW50cyA9IG9iai5maW5kKCAnLm1haW5fX2NsaWVudHMtcGFnaW5hdGlvbicgKSxcclxuICAgICAgICAgICAgX21haW5TbGlkZXJDbGllbnRzV3JhcCA9IF9vYmouZmluZCgnLm1haW5fX2NsaWVudHMnKSxcclxuICAgICAgICAgICAgX21haW5TbGlkZXJDbGllbnRzID0gbnVsbCxcclxuICAgICAgICAgICAgX2R1cmF0aW9uID0gNTAwMCxcclxuICAgICAgICAgICAgX3BlclZpZXdDbGllbnRzID0gMTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9hZGRNYWluU2xpZGVyID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX21haW5TbGlkZXIgPSBuZXcgU3dpcGVyKCBfbWFpblNsaWRlcldyYXAuZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX25leHRCdG4sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldkJ1dHRvbjogX3ByZXZCdG4sXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogX3BlclZpZXcsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9hZGRNYWluU2xpZGVyQ2xpZW50cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9tYWluU2xpZGVyQ2xpZW50cyA9IG5ldyBTd2lwZXIoIF9tYWluU2xpZGVyQ2xpZW50c1dyYXAuZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbjogX3BhZ2luYXRpb25DbGllbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IF9wZXJWaWV3Q2xpZW50cyxcclxuICAgICAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiBfZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbkNsaWNrYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBfYWRkTWFpblNsaWRlcigpO1xyXG4gICAgICAgICAgICAgICAgX2FkZE1haW5TbGlkZXJDbGllbnRzKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgUHJvamVjdFNsaWRlciA9IGZ1bmN0aW9uKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfbmV4dEJ0biA9IG9iai5maW5kKCAnLnByb2plY3RfX3NsaWRlci1uZXh0JyApLFxyXG4gICAgICAgICAgICBfcHJldkJ0biA9IG9iai5maW5kKCAnLnByb2plY3RfX3NsaWRlci1wcmV2JyApLFxyXG4gICAgICAgICAgICBfbWFpblNsaWRlciA9IG51bGwsXHJcbiAgICAgICAgICAgIF9wZXJWaWV3ID0gMTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9hZGRTbGlkZXIgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfbWFpblNsaWRlciA9IG5ldyBTd2lwZXIoIF9vYmouZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX25leHRCdG4sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldkJ1dHRvbjogX3ByZXZCdG4sXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogX3BlclZpZXcsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBfYWRkU2xpZGVyKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgRm9ybVZhbGlkYXRpb24gPSBmdW5jdGlvbiggb2JqICkge1xyXG5cclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfcGF0aCA9IF9vYmouYXR0ciggJ2FjdGlvbicgKSxcclxuICAgICAgICAgICAgX2lucHV0cyA9IF9vYmouZmluZCggJ1tyZXF1aXJlZF0nICksXHJcbiAgICAgICAgICAgIF9zZW50TWVzc2FnZU1hcmsgPSBfb2JqLmZpbmQoICcuc2l0ZV9fZm9ybS1zZW50JyApLFxyXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoub24oe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAnc3VibWl0JzogZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaCggX2lucHV0cywgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJBdHRyID0gY3VySXRlbS5hdHRyKCAndHlwZScgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ckl0ZW0udmFsKCkgPT0gJycgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5wYXJlbnQoKS5hZGRDbGFzcyggJ2Zvcm0tdmFsaWRhdGlvbl9fZXJyb3InICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjdXJBdHRyID09ICdlbWFpbCcgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9IC9eKFthLXowLTlfXFwuLV0pK0BbYS16MC05LV0rXFwuKFthLXpdezIsNH1cXC4pP1thLXpdezIsNH0kL2k7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXR0ZXJuLnRlc3QoIGN1ckl0ZW0udmFsKCkgKSA9PSBmYWxzZSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLnBhcmVudCgpLmFkZENsYXNzKCAnZm9ybS12YWxpZGF0aW9uX19lcnJvcicgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF9vYmouZmluZCggJy5mb3JtLXZhbGlkYXRpb25fX2Vycm9yJyApLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hamF4UmVxdWVzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfaW5wdXRzLm9uKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJ2ZvY3VzJzogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLnBhcmVudCgpLmhhc0NsYXNzKCAnZm9ybS12YWxpZGF0aW9uX19lcnJvcicgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucGFyZW50KCkucmVtb3ZlQ2xhc3MoICdmb3JtLXZhbGlkYXRpb25fX2Vycm9yJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9hamF4UmVxdWVzdCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0LmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBfcGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBfb2JqLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMjAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19vYmoudHJpZ2dlciggJ3Jlc2V0JyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfc2VudE1lc3NhZ2VNYXJrLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZW50TWVzc2FnZU1hcmsuYWRkQ2xhc3MoICdzaXRlX19mb3JtLXNlbnRfc2hvdycgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCBYTUxIdHRwUmVxdWVzdCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gXCJhYm9ydFwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoICdFcnJvciEnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgdmFyIEFsbFdvcmtzID0gZnVuY3Rpb24gKCBvYmogKSB7XHJcblxyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9zaXRlVGl0bGUgPSBfb2JqLmZpbmQoICcuc2l0ZV9fdGl0bGUnICksXHJcbiAgICAgICAgICAgIF90aXRsZVBvc1RvcCA9IF9zaXRlVGl0bGUub2Zmc2V0KCkudG9wLFxyXG4gICAgICAgICAgICBfdGl0bGVIZWlnaHQgPSBfc2l0ZVRpdGxlLmlubmVySGVpZ2h0KCksXHJcbiAgICAgICAgICAgIF90aXRsZUhlaWdodEluZGVudCA9IDAsXHJcbiAgICAgICAgICAgIF9maWx0ZXIgPSBfb2JqLmZpbmQoICcuZmlsdGVyJyApLFxyXG4gICAgICAgICAgICBfZmlsdGVyUG9zVG9wID0gX2ZpbHRlci5vZmZzZXQoKS50b3AsXHJcbiAgICAgICAgICAgIF9maWx0ZXJIZWlnaHQgPSBfZmlsdGVyLmlubmVySGVpZ2h0KCksXHJcbiAgICAgICAgICAgIF9maWx0ZXJIZWlnaHRJbmRlbnQgPSAwLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXHJcbiAgICAgICAgICAgIF9zY3JvbGxUb3AgPSBfd2luZG93LnNjcm9sbFRvcCgpO1xyXG5cclxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKHtcclxuICAgICAgICAgICAgICAgICAgICAnbG9hZCc6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aXRsZVBvc1RvcCA9IF9zaXRlVGl0bGUub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZmlsdGVyUG9zVG9wID0gX2ZpbHRlci5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYWxjdWxhdGVWYWx1ZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICdzY3JvbGwnOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FsY3VsYXRlVmFsdWVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAncmVzaXplJzogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RpdGxlUG9zVG9wID0gX3NpdGVUaXRsZS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9maWx0ZXJQb3NUb3AgPSBfZmlsdGVyLm9mZnNldCgpLnRvcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NhbGN1bGF0ZVZhbHVlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2FkZFBhZGRpbmcgPSBmdW5jdGlvbigpICB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHBhZGRpbmdUb3A7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBfc2l0ZVRpdGxlLmhhc0NsYXNzKCAnZml4ZWQnICkgKXtcclxuICAgICAgICAgICAgICAgICAgICBfdGl0bGVIZWlnaHRJbmRlbnQgPSBfc2l0ZVRpdGxlLmlubmVySGVpZ2h0KCkgKyBwYXJzZUludCggX3NpdGVUaXRsZS5jc3MoICdtYXJnaW4tYm90dG9tJyApICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aXRsZUhlaWdodEluZGVudCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBfZmlsdGVyLmhhc0NsYXNzKCAnZml4ZWQnICkgKXtcclxuICAgICAgICAgICAgICAgICAgICBfZmlsdGVySGVpZ2h0SW5kZW50ID0gX2ZpbHRlci5pbm5lckhlaWdodCgpICsgcGFyc2VJbnQoIF9maWx0ZXIuY3NzKCAnbWFyZ2luLWJvdHRvbScgKSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZmlsdGVySGVpZ2h0SW5kZW50ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nVG9wID0gX3RpdGxlSGVpZ2h0SW5kZW50ICsgX2ZpbHRlckhlaWdodEluZGVudDtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICdwYWRkaW5nLXRvcCc6IHBhZGRpbmdUb3BcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jYWxjdWxhdGVWYWx1ZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIF90aXRsZUhlaWdodCA9IF9zaXRlVGl0bGUuaW5uZXJIZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIF9maWx0ZXJIZWlnaHQgPSBfZmlsdGVyLmlubmVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICBfc2Nyb2xsVG9wID0gX3dpbmRvdy5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgICAgIF9maWx0ZXJGaXhlZCgpO1xyXG4gICAgICAgICAgICAgICAgX3RpdGxlRml4ZWQoKTtcclxuICAgICAgICAgICAgICAgIF9hZGRQYWRkaW5nKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9maWx0ZXJGaXhlZCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX3Njcm9sbFRvcCA+PSBfZmlsdGVyUG9zVG9wIC0gX3RpdGxlSGVpZ2h0ICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX2ZpbHRlci5hZGRDbGFzcyggJ2ZpeGVkJyApO1xyXG4gICAgICAgICAgICAgICAgICAgIF9maWx0ZXIuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogX3RpdGxlSGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfZmlsdGVyLnJlbW92ZUNsYXNzKCAnZml4ZWQnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2ZpbHRlci5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF90aXRsZUZpeGVkID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBfc2Nyb2xsVG9wID4gX3RpdGxlUG9zVG9wICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NpdGVUaXRsZS5hZGRDbGFzcyggJ2ZpeGVkJyApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfc2l0ZVRpdGxlLnJlbW92ZUNsYXNzKCAnZml4ZWQnICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9jYWxjdWxhdGVWYWx1ZXMoKTtcclxuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgRmlsdGVyID0gZnVuY3Rpb24gKCBvYmogKSB7XHJcblxyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9pdGVtID0gX29iai5maW5kKCAnLmZpbHRlcl9faXRlbScpLFxyXG4gICAgICAgICAgICBfZGF0YUFycmF5ID0gW10sXHJcbiAgICAgICAgICAgIF9wYXRoID0gX29iai5hdHRyKCAnYWN0aW9uJyApLFxyXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfaXRlbS5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RhdGFBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCB0aGlzICkudG9nZ2xlQ2xhc3MoICdhY3RpdmUnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jb2xsZWN0QXR0cmlidXRlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19zZW5kQWpheCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jb2xsZWN0QXR0cmlidXRlcyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9pdGVtLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyRWxlbSA9ICQoIHRoaXMgKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ckVsZW0uaGFzQ2xhc3MoICdhY3RpdmUnICkgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RhdGFBcnJheVtfZGF0YUFycmF5Lmxlbmd0aF0gPSBjdXJFbGVtLmRhdGEoICdpZCcgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9kYXRhQXJyYXkpO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2VuZEFqYXggPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfcmVxdWVzdC5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QgPSAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogX3BhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogX2RhdGFBcnJheSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDIwMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICggWE1MSHR0cFJlcXVlc3QgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCAnRXJyb3IhJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG5cclxuICAgIH07XHJcblxyXG59KTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
