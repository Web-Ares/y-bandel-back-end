"use strict";$(function(){$(function(){$(".site__header").each(function(){new n($(this))}),$(".clients").each(function(){new t($(this))}),$(".main").each(function(){new i($(this))}),$(".project__slider").each(function(){new e($(this))}),$(".form-validation").each(function(){new o($(this))}),$(".all-works").each(function(){new a($(this))}),$(".filter").each(function(){new s($(this))}),$(".wpcf7 input").on({focus:function(){$(this).parent().find(".wpcf7-not-valid-tip").remove()}})});var n=function(n){var i=n,t=$(".menu__close, .menu-btn"),e=!1,o=function(){$(window).on({resize:function(){s()}}),t.on({click:function(){i.toggleClass("open"),t.toggleClass("open")}})},a=function(){i.niceScroll({cursorcolor:"#fff",railalign:"right",cursorwidth:3,cursorborder:0,autohidemode:!1,railpadding:{top:0,right:0,left:0,bottom:0}})},s=function(){e?$(window).width()>1023?i.getNiceScroll().resize():(i.getNiceScroll().remove(),i.removeClass("site__header_nice-scroll"),e=!1):$(window).width()>1023&&(a(),i.addClass("site__header_nice-scroll"),e=!0)},r=function(){o(),s()};r()},i=function(n){var i=n,t=n.find(".main__slider-next"),e=n.find(".main__slider-prev"),o=i.find(".main__slider"),a=null,s=1,r=n.find(".main__clients-pagination"),c=i.find(".main__clients"),l=null,f=5e3,d=1,u=function(){},_=function(){a=new Swiper(o.find(".swiper-container"),{nextButton:t,prevButton:e,slidesPerView:s,loop:!0})},p=function(){l=new Swiper(c.find(".swiper-container"),{pagination:r,slidesPerView:d,loop:!0,autoplay:f,paginationClickable:!0})},h=function(){u(),_(),p()};h()},t=function(n){var i=n,t=(i.find(".clients__list"),i.find(".clients__item").length),e=$(window);console.log(parseInt(t/4));var o=function(){e.on({resize:function(){a(e.width())}})},a=function(n){switch(n){case 1024:console.log("1024");break;case 1024:console.log("1366");break;case 1024:console.log("1920")}},s=function(){o()};s()},e=function(n){var i=n,t=n.find(".project__slider-next"),e=n.find(".project__slider-prev"),o=null,a=1,s=function(){},r=function(){o=new Swiper(i.find(".swiper-container"),{nextButton:t,prevButton:e,slidesPerView:a,loop:!0})},c=function(){s(),r()};c()},o=function(n){var i=this,t=n,e=t.attr("action"),o=t.find("[required]"),a=t.find(".site__form-sent"),s=new XMLHttpRequest,r=function(){t.on({submit:function(){return $.each(o,function(){var n=$(this),i=n.attr("type");if(""==n.val()&&n.parent().addClass("form-validation__error"),"email"==i){var t=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;0==t.test(n.val())&&n.parent().addClass("form-validation__error")}}),t.find(".form-validation__error").length?!1:(c(),!1)}}),o.on({focus:function(){var n=$(this);n.parent().hasClass("form-validation__error")&&n.parent().removeClass("form-validation__error")}})},c=function(){s.abort(),s=$.ajax({url:e,data:t.serialize(),dataType:"html",timeout:2e4,type:"get",success:function(){a.length&&a.addClass("site__form-sent_show")},error:function(n){"abort"!=n.statusText&&alert("Error!")}})},l=function(){r(),t[0].obj=i};l()},a=function(n){var i=this,t=n,e=t.find(".site__title"),o=e.offset().top,a=e.innerHeight(),s=0,r=t.find(".filter"),c=t.find("input"),l=r.offset().top,f=r.innerHeight(),d=0,u=$(window),_=u.scrollTop(),p=!0,h=t.find(".all-works__wrap"),w=t.find(".all-works__loader"),m=1,v=function(){u.on({load:function(){o=e.offset().top,l=r.offset().top,C()},scroll:function(){C(),_+u.height()>h.offset().top+h.height()&&p&&(p=!1,w.addClass("active"),x(!1))},resize:function(){o=e.offset().top,l=r.offset().top,C()}}),c.on({change:function(){p=!1,m=0,w.addClass("active"),x(!0)}})},g=function(){var n;s=e.hasClass("fixed")?e.innerHeight()+parseInt(e.css("margin-bottom")):0,d=r.hasClass("fixed")?r.innerHeight()+parseInt(r.css("margin-bottom")):0,n=s+d,t.css({"padding-top":n})},k=function(n){for(var i=0;i<n.length;i++)h.append('<div class="all-works__item all-works__item_added"><a href="'+n[i].link+'" class="all-works__pic" style="background-image: url('+n[i].pic+')"></a><div class="all-works__footer"><span class="all-works__name">'+n[i].name+'</span><span class="all-works__icon">'+n[i].icon+'</span><span class="all-works__square">'+n[i].square+'<span>m<span>2</span></span></span><a href="'+n[i].link+'" class="btn btn_2"></a></div></div>');setTimeout(function(){$(".all-works__item").removeClass("all-works__item_added")},50)},C=function(){a=e.innerHeight(),f=r.innerHeight(),_=u.scrollTop(),b(),z(),g()},b=function(){_>=l-a?(r.addClass("fixed"),r.css({top:a})):(r.removeClass("fixed"),r.css({top:""}))},x=function(n){$.ajax({url:$("body").data("action"),data:{action:"get_posts",filterData:$(".filter").serialize(),currentPage:m},dataType:"json",type:"get",success:function(i){n&&$(".all-works__item").remove(),w.removeClass("active"),k(i.items),i.col>0?(m++,p=!0):p=!1},error:function(n){"abort"!=n.statusText}})},z=function(){_>o?e.addClass("fixed"):e.removeClass("fixed")},j=function(){C(),v(),t[0].obj=i};j()},s=function(n){var i=this,t=n,e=t.find("input"),o=function(){e.on({change:function(){}})},a=function(){o(),t[0].obj=i};a()}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiZWFjaCIsIk1lbnUiLCJ0aGlzIiwiQ2xpZW50cyIsIk1haW4iLCJQcm9qZWN0U2xpZGVyIiwiRm9ybVZhbGlkYXRpb24iLCJBbGxXb3JrcyIsIkZpbHRlciIsIm9uIiwiZm9jdXMiLCJwYXJlbnQiLCJmaW5kIiwicmVtb3ZlIiwib2JqIiwiX29iaiIsIl9idG5zIiwiX3Njcm9sbEFkZGVkIiwiX2FkZEV2ZW50cyIsIndpbmRvdyIsInJlc2l6ZSIsIl9jYW5BZGRTY3JvbGwiLCJjbGljayIsInRvZ2dsZUNsYXNzIiwiX2FkZFNjcm9sbCIsIm5pY2VTY3JvbGwiLCJjdXJzb3Jjb2xvciIsInJhaWxhbGlnbiIsImN1cnNvcndpZHRoIiwiY3Vyc29yYm9yZGVyIiwiYXV0b2hpZGVtb2RlIiwicmFpbHBhZGRpbmciLCJ0b3AiLCJyaWdodCIsImxlZnQiLCJib3R0b20iLCJ3aWR0aCIsImdldE5pY2VTY3JvbGwiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiX2luaXQiLCJfbmV4dEJ0biIsIl9wcmV2QnRuIiwiX21haW5TbGlkZXJXcmFwIiwiX21haW5TbGlkZXIiLCJfcGVyVmlldyIsIl9wYWdpbmF0aW9uQ2xpZW50cyIsIl9tYWluU2xpZGVyQ2xpZW50c1dyYXAiLCJfbWFpblNsaWRlckNsaWVudHMiLCJfZHVyYXRpb24iLCJfcGVyVmlld0NsaWVudHMiLCJfYWRkTWFpblNsaWRlciIsIlN3aXBlciIsIm5leHRCdXR0b24iLCJwcmV2QnV0dG9uIiwic2xpZGVzUGVyVmlldyIsImxvb3AiLCJfYWRkTWFpblNsaWRlckNsaWVudHMiLCJwYWdpbmF0aW9uIiwiYXV0b3BsYXkiLCJwYWdpbmF0aW9uQ2xpY2thYmxlIiwiX2l0ZW1zIiwibGVuZ3RoIiwiX3dpbmRvdyIsImNvbnNvbGUiLCJsb2ciLCJwYXJzZUludCIsIl9hZGRJdGVtcyIsIm1lZGlhU2NyZWVuIiwiX2FkZFNsaWRlciIsIl9zZWxmIiwiX3BhdGgiLCJhdHRyIiwiX2lucHV0cyIsIl9zZW50TWVzc2FnZU1hcmsiLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0Iiwic3VibWl0IiwiY3VySXRlbSIsImN1ckF0dHIiLCJ2YWwiLCJwYXR0ZXJuIiwidGVzdCIsIl9hamF4UmVxdWVzdCIsImhhc0NsYXNzIiwiYWJvcnQiLCJhamF4IiwidXJsIiwiZGF0YSIsInNlcmlhbGl6ZSIsImRhdGFUeXBlIiwidGltZW91dCIsInR5cGUiLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXNUZXh0IiwiYWxlcnQiLCJfc2l0ZVRpdGxlIiwiX3RpdGxlUG9zVG9wIiwib2Zmc2V0IiwiX3RpdGxlSGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJfdGl0bGVIZWlnaHRJbmRlbnQiLCJfZmlsdGVyIiwiX2ZpbHRlckl0ZW0iLCJfZmlsdGVyUG9zVG9wIiwiX2ZpbHRlckhlaWdodCIsIl9maWx0ZXJIZWlnaHRJbmRlbnQiLCJfc2Nyb2xsVG9wIiwic2Nyb2xsVG9wIiwiX2NhbkFkZFByb2plY3RzIiwiX3dvcmtzV3JhcCIsIl9sb2FkZXIiLCJjdXJyZW50UGFnZSIsImxvYWQiLCJfY2FsY3VsYXRlVmFsdWVzIiwic2Nyb2xsIiwiaGVpZ2h0IiwiX3NlbmRBamF4IiwiY2hhbmdlIiwiX2FkZFBhZGRpbmciLCJwYWRkaW5nVG9wIiwiY3NzIiwicGFkZGluZy10b3AiLCJhcnIiLCJpIiwiYXBwZW5kIiwibGluayIsInBpYyIsIm5hbWUiLCJpY29uIiwic3F1YXJlIiwic2V0VGltZW91dCIsIl9maWx0ZXJGaXhlZCIsIl90aXRsZUZpeGVkIiwiY2FuUmVtb3ZlUHJvamVjdHMiLCJhY3Rpb24iLCJmaWx0ZXJEYXRhIiwibXNnIiwiaXRlbXMiLCJjb2wiLCJfaXRlbSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBQUEsR0FBRSxXQUdFQSxFQUFFLFdBRUVBLEVBQUUsaUJBQWlCQyxLQUFNLFdBQ3JCLEdBQUlDLEdBQU1GLEVBQUVHLFNBR2hCSCxFQUFFLFlBQVlDLEtBQU0sV0FDaEIsR0FBSUcsR0FBU0osRUFB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LEdBRzFCaEIsTUFBTyxTQUFVbEIsR0FDb0IsU0FBN0JBLEVBQWVtQixlQU8vQnVDLEVBQWMsV0FFTDFCLEVBQWFWLEVBQ2RELEVBQVcxRCxTQUFVLFNBRXJCMEQsRUFBVzNELFlBQWEsVUFJaENFLEVBQVEsV0FDSjJFLElBQ0FqRyxJQUNBSCxFQUFLLEdBQUdELElBQU13RCxFQUd0QjlCLE1BSUFoQyxFQUFTLFNBQVVNLEdBRW5CLEdBQUl3RCxHQUFRcEUsS0FDUmEsRUFBT0QsRUFDUCtILEVBQVE5SCxFQUFLSCxLQUFNLFNBRW5CTSxFQUFhLFdBRVQySCxFQUFNcEksSUFDRjhHLE9BQVEsZ0JBTWhCL0UsRUFBUSxXQUNKdEIsSUFDQUgsRUFBSyxHQUFHRCxJQUFNd0QsRUFHdEI5QiIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbigpe1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgICQoZnVuY3Rpb24oKXtcblxuICAgICAgICAkKCcuc2l0ZV9faGVhZGVyJykuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuZXcgTWVudSggJCh0aGlzKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLmNsaWVudHMnKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5ldyBDbGllbnRzKCAkKHRoaXMpICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCcubWFpbicpLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmV3IE1haW4oICQodGhpcykgKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5wcm9qZWN0X19zbGlkZXInKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5ldyBQcm9qZWN0U2xpZGVyKCAkKHRoaXMpICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCcuZm9ybS12YWxpZGF0aW9uJykuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuZXcgRm9ybVZhbGlkYXRpb24oICQodGhpcykgKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5hbGwtd29ya3MnKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5ldyBBbGxXb3JrcyggJCh0aGlzKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLmZpbHRlcicpLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmV3IEZpbHRlciggJCh0aGlzKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCggJy53cGNmNyBpbnB1dCcpLm9uKCB7XG4gICAgICAgICAgICAnZm9jdXMnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy53cGNmNy1ub3QtdmFsaWQtdGlwJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcblxuICAgIH0pO1xuXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiggb2JqICkge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2J0bnM9ICQoJy5tZW51X19jbG9zZSwgLm1lbnUtYnRuJyksXG4gICAgICAgICAgICBfc2Nyb2xsQWRkZWQgPSBmYWxzZTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKHdpbmRvdykub24oIHtcbiAgICAgICAgICAgICAgICAgICAgJ3Jlc2l6ZSc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NhbkFkZFNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2J0bnMub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai50b2dnbGVDbGFzcyggJ29wZW4nICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYnRucy50b2dnbGVDbGFzcyggJ29wZW4nICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWRkU2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29iai5uaWNlU2Nyb2xsKHtcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yY29sb3I6IFwiI2ZmZlwiLFxuICAgICAgICAgICAgICAgICAgICByYWlsYWxpZ246ICdyaWdodCcsXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcndpZHRoOiAzLFxuICAgICAgICAgICAgICAgICAgICBjdXJzb3Jib3JkZXI6IDAsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9oaWRlbW9kZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHJhaWxwYWRkaW5nOiB7dG9wOiAwLCByaWdodDogMCwgbGVmdDogMCwgYm90dG9tOiAwfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jYW5BZGRTY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoIF9zY3JvbGxBZGRlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAkKCB3aW5kb3cgKS53aWR0aCgpID4gMTAyMyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZ2V0TmljZVNjcm9sbCgpLnJlc2l6ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5nZXROaWNlU2Nyb2xsKCkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc2l0ZV9faGVhZGVyX25pY2Utc2Nyb2xsJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Njcm9sbEFkZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICQoIHdpbmRvdyApLndpZHRoKCkgPiAxMDIzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZFNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3NpdGVfX2hlYWRlcl9uaWNlLXNjcm9sbCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zY3JvbGxBZGRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9jYW5BZGRTY3JvbGwoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIE1haW4gPSBmdW5jdGlvbihvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9uZXh0QnRuID0gb2JqLmZpbmQoICcubWFpbl9fc2xpZGVyLW5leHQnICksXG4gICAgICAgICAgICBfcHJldkJ0biA9IG9iai5maW5kKCAnLm1haW5fX3NsaWRlci1wcmV2JyApLFxuICAgICAgICAgICAgX21haW5TbGlkZXJXcmFwID0gX29iai5maW5kKCcubWFpbl9fc2xpZGVyJyksXG4gICAgICAgICAgICBfbWFpblNsaWRlciA9IG51bGwsXG4gICAgICAgICAgICBfcGVyVmlldyA9IDEsXG4gICAgICAgICAgICBfcGFnaW5hdGlvbkNsaWVudHMgPSBvYmouZmluZCggJy5tYWluX19jbGllbnRzLXBhZ2luYXRpb24nICksXG4gICAgICAgICAgICBfbWFpblNsaWRlckNsaWVudHNXcmFwID0gX29iai5maW5kKCcubWFpbl9fY2xpZW50cycpLFxuICAgICAgICAgICAgX21haW5TbGlkZXJDbGllbnRzID0gbnVsbCxcbiAgICAgICAgICAgIF9kdXJhdGlvbiA9IDUwMDAsXG4gICAgICAgICAgICBfcGVyVmlld0NsaWVudHMgPSAxO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRNYWluU2xpZGVyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfbWFpblNsaWRlciA9IG5ldyBTd2lwZXIoIF9tYWluU2xpZGVyV3JhcC5maW5kKCAnLnN3aXBlci1jb250YWluZXInICksIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX25leHRCdG4sXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9wcmV2QnRuLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBfcGVyVmlldyxcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRNYWluU2xpZGVyQ2xpZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX21haW5TbGlkZXJDbGllbnRzID0gbmV3IFN3aXBlciggX21haW5TbGlkZXJDbGllbnRzV3JhcC5maW5kKCAnLnN3aXBlci1jb250YWluZXInICksIHtcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbjogX3BhZ2luYXRpb25DbGllbnRzLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBfcGVyVmlld0NsaWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiBfZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb25DbGlja2FibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfYWRkTWFpblNsaWRlcigpO1xuICAgICAgICAgICAgICAgIF9hZGRNYWluU2xpZGVyQ2xpZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBDbGllbnRzID0gZnVuY3Rpb24ob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfbGlzdCA9IF9vYmouZmluZCggJy5jbGllbnRzX19saXN0JyApLFxuICAgICAgICAgICAgX2l0ZW1zID0gX29iai5maW5kKCAnLmNsaWVudHNfX2l0ZW0nKS5sZW5ndGgsXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICk7XG5cbiAgICAgICAgY29uc29sZS5sb2cocGFyc2VJbnQoX2l0ZW1zLzQpKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICAncmVzaXplJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYWRkSXRlbXMoX3dpbmRvdy53aWR0aCgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRJdGVtcyA9IGZ1bmN0aW9uKG1lZGlhU2NyZWVuKSB7XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lZGlhU2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTAyNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcxMDI0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDI0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJzEzNjYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDEwMjQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnMTkyMCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFByb2plY3RTbGlkZXIgPSBmdW5jdGlvbihvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9uZXh0QnRuID0gb2JqLmZpbmQoICcucHJvamVjdF9fc2xpZGVyLW5leHQnICksXG4gICAgICAgICAgICBfcHJldkJ0biA9IG9iai5maW5kKCAnLnByb2plY3RfX3NsaWRlci1wcmV2JyApLFxuICAgICAgICAgICAgX21haW5TbGlkZXIgPSBudWxsLFxuICAgICAgICAgICAgX3BlclZpZXcgPSAxO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRTbGlkZXIgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9tYWluU2xpZGVyID0gbmV3IFN3aXBlciggX29iai5maW5kKCAnLnN3aXBlci1jb250YWluZXInICksIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX25leHRCdG4sXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9wcmV2QnRuLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBfcGVyVmlldyxcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9hZGRTbGlkZXIoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgRm9ybVZhbGlkYXRpb24gPSBmdW5jdGlvbiggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3BhdGggPSBfb2JqLmF0dHIoICdhY3Rpb24nICksXG4gICAgICAgICAgICBfaW5wdXRzID0gX29iai5maW5kKCAnW3JlcXVpcmVkXScgKSxcbiAgICAgICAgICAgIF9zZW50TWVzc2FnZU1hcmsgPSBfb2JqLmZpbmQoICcuc2l0ZV9fZm9ybS1zZW50JyApLFxuICAgICAgICAgICAgX3JlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX29iai5vbih7XG5cbiAgICAgICAgICAgICAgICAgICAgJ3N1Ym1pdCc6IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaCggX2lucHV0cywgZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCggdGhpcyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJBdHRyID0gY3VySXRlbS5hdHRyKCAndHlwZScgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY3VySXRlbS52YWwoKSA9PSAnJyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5wYXJlbnQoKS5hZGRDbGFzcyggJ2Zvcm0tdmFsaWRhdGlvbl9fZXJyb3InICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjdXJBdHRyID09ICdlbWFpbCcgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSAvXihbYS16MC05X1xcLi1dKStAW2EtejAtOS1dK1xcLihbYS16XXsyLDR9XFwuKT9bYS16XXsyLDR9JC9pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhdHRlcm4udGVzdCggY3VySXRlbS52YWwoKSApID09IGZhbHNlICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLnBhcmVudCgpLmFkZENsYXNzKCAnZm9ybS12YWxpZGF0aW9uX19lcnJvcicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF9vYmouZmluZCggJy5mb3JtLXZhbGlkYXRpb25fX2Vycm9yJyApLmxlbmd0aCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hamF4UmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfaW5wdXRzLm9uKHtcblxuICAgICAgICAgICAgICAgICAgICAnZm9jdXMnOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKCB0aGlzICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLnBhcmVudCgpLmhhc0NsYXNzKCAnZm9ybS12YWxpZGF0aW9uX19lcnJvcicgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLnBhcmVudCgpLnJlbW92ZUNsYXNzKCAnZm9ybS12YWxpZGF0aW9uX19lcnJvcicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hamF4UmVxdWVzdCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogX3BhdGgsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IF9vYmouc2VyaWFsaXplKCksXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDIwMDAwLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vX29iai50cmlnZ2VyKCAncmVzZXQnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggX3NlbnRNZXNzYWdlTWFyay5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbnRNZXNzYWdlTWFyay5hZGRDbGFzcyggJ3NpdGVfX2Zvcm0tc2VudF9zaG93JyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICggWE1MSHR0cFJlcXVlc3QgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggWE1MSHR0cFJlcXVlc3Quc3RhdHVzVGV4dCAhPSBcImFib3J0XCIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoICdFcnJvciEnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG5cbiAgICB9O1xuXG4gICAgdmFyIEFsbFdvcmtzID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfc2l0ZVRpdGxlID0gX29iai5maW5kKCAnLnNpdGVfX3RpdGxlJyApLFxuICAgICAgICAgICAgX3RpdGxlUG9zVG9wID0gX3NpdGVUaXRsZS5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgICBfdGl0bGVIZWlnaHQgPSBfc2l0ZVRpdGxlLmlubmVySGVpZ2h0KCksXG4gICAgICAgICAgICBfdGl0bGVIZWlnaHRJbmRlbnQgPSAwLFxuICAgICAgICAgICAgX2ZpbHRlciA9IF9vYmouZmluZCggJy5maWx0ZXInICksXG4gICAgICAgICAgICBfZmlsdGVySXRlbSA9IF9vYmouZmluZCggJ2lucHV0JyApLFxuICAgICAgICAgICAgX2ZpbHRlclBvc1RvcCA9IF9maWx0ZXIub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgX2ZpbHRlckhlaWdodCA9IF9maWx0ZXIuaW5uZXJIZWlnaHQoKSxcbiAgICAgICAgICAgIF9maWx0ZXJIZWlnaHRJbmRlbnQgPSAwLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX3Njcm9sbFRvcCA9IF93aW5kb3cuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICBfY2FuQWRkUHJvamVjdHMgPSB0cnVlLFxuICAgICAgICAgICAgX3dvcmtzV3JhcCA9IF9vYmouZmluZCgnLmFsbC13b3Jrc19fd3JhcCcpLFxuICAgICAgICAgICAgX2xvYWRlciA9IF9vYmouZmluZCggJy5hbGwtd29ya3NfX2xvYWRlcicpLFxuICAgICAgICAgICAgY3VycmVudFBhZ2UgPSAxO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbih7XG4gICAgICAgICAgICAgICAgICAgICdsb2FkJzogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aXRsZVBvc1RvcCA9IF9zaXRlVGl0bGUub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2ZpbHRlclBvc1RvcCA9IF9maWx0ZXIub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NhbGN1bGF0ZVZhbHVlcygpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnc2Nyb2xsJzogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYWxjdWxhdGVWYWx1ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKF9zY3JvbGxUb3AgKyBfd2luZG93LmhlaWdodCgpICkgPiAoX3dvcmtzV3JhcC5vZmZzZXQoKS50b3AgKyBfd29ya3NXcmFwLmhlaWdodCgpKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF9jYW5BZGRQcm9qZWN0cyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhbkFkZFByb2plY3RzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2FkZXIuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VuZEFqYXgoIGZhbHNlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAncmVzaXplJzogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aXRsZVBvc1RvcCA9IF9zaXRlVGl0bGUub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2ZpbHRlclBvc1RvcCA9IF9maWx0ZXIub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NhbGN1bGF0ZVZhbHVlcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfZmlsdGVySXRlbS5vbigge1xuICAgICAgICAgICAgICAgICAgICAnY2hhbmdlJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FuQWRkUHJvamVjdHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2FkZXIuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3NlbmRBamF4KCB0cnVlICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWRkUGFkZGluZyA9IGZ1bmN0aW9uKCkgIHtcblxuICAgICAgICAgICAgICAgIHZhciBwYWRkaW5nVG9wO1xuXG4gICAgICAgICAgICAgICAgaWYgKCBfc2l0ZVRpdGxlLmhhc0NsYXNzKCAnZml4ZWQnICkgKXtcbiAgICAgICAgICAgICAgICAgICAgX3RpdGxlSGVpZ2h0SW5kZW50ID0gX3NpdGVUaXRsZS5pbm5lckhlaWdodCgpICsgcGFyc2VJbnQoIF9zaXRlVGl0bGUuY3NzKCAnbWFyZ2luLWJvdHRvbScgKSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aXRsZUhlaWdodEluZGVudCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCBfZmlsdGVyLmhhc0NsYXNzKCAnZml4ZWQnICkgKXtcbiAgICAgICAgICAgICAgICAgICAgX2ZpbHRlckhlaWdodEluZGVudCA9IF9maWx0ZXIuaW5uZXJIZWlnaHQoKSArIHBhcnNlSW50KCBfZmlsdGVyLmNzcyggJ21hcmdpbi1ib3R0b20nICkgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfZmlsdGVySGVpZ2h0SW5kZW50ID0gMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBwYWRkaW5nVG9wID0gX3RpdGxlSGVpZ2h0SW5kZW50ICsgX2ZpbHRlckhlaWdodEluZGVudDtcblxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdwYWRkaW5nLXRvcCc6IHBhZGRpbmdUb3BcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWRkSXRlbXMgPSBmdW5jdGlvbiggYXJyICkge1xuXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPTA7IGkgPCBhcnIubGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgICAgIF93b3Jrc1dyYXAuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYWxsLXdvcmtzX19pdGVtIGFsbC13b3Jrc19faXRlbV9hZGRlZFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGEgaHJlZj1cIicgKyBhcnJbaV0ubGluayArICdcIiBjbGFzcz1cImFsbC13b3Jrc19fcGljXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyArIGFycltpXS5waWMgKyAnKVwiPjwvYT4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGwtd29ya3NfX2Zvb3RlclwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJhbGwtd29ya3NfX25hbWVcIj4nICsgYXJyW2ldLm5hbWUgKyAnPC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJhbGwtd29ya3NfX2ljb25cIj4nICsgYXJyW2ldLmljb24gKyAnPC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJhbGwtd29ya3NfX3NxdWFyZVwiPicgKyBhcnJbaV0uc3F1YXJlICsgJzxzcGFuPm08c3Bhbj4yPC9zcGFuPjwvc3Bhbj48L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgICAgICc8YSBocmVmPVwiJyArIGFycltpXS5saW5rICsgJ1wiIGNsYXNzPVwiYnRuIGJ0bl8yXCI+PC9hPicgK1xuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJCggJy5hbGwtd29ya3NfX2l0ZW0nKS5yZW1vdmVDbGFzcyggJ2FsbC13b3Jrc19faXRlbV9hZGRlZCcgKTtcblxuICAgICAgICAgICAgICAgIH0sIDUwICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2FsY3VsYXRlVmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX3RpdGxlSGVpZ2h0ID0gX3NpdGVUaXRsZS5pbm5lckhlaWdodCgpO1xuICAgICAgICAgICAgICAgIF9maWx0ZXJIZWlnaHQgPSBfZmlsdGVyLmlubmVySGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgX3Njcm9sbFRvcCA9IF93aW5kb3cuc2Nyb2xsVG9wKCk7XG4gICAgICAgICAgICAgICAgX2ZpbHRlckZpeGVkKCk7XG4gICAgICAgICAgICAgICAgX3RpdGxlRml4ZWQoKTtcbiAgICAgICAgICAgICAgICBfYWRkUGFkZGluZygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9maWx0ZXJGaXhlZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCBfc2Nyb2xsVG9wID49IF9maWx0ZXJQb3NUb3AgLSBfdGl0bGVIZWlnaHQgKXtcbiAgICAgICAgICAgICAgICAgICAgX2ZpbHRlci5hZGRDbGFzcyggJ2ZpeGVkJyApO1xuICAgICAgICAgICAgICAgICAgICBfZmlsdGVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBfdGl0bGVIZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF9maWx0ZXIucmVtb3ZlQ2xhc3MoICdmaXhlZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgX2ZpbHRlci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJydcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZW5kQWpheCA9IGZ1bmN0aW9uKGNhblJlbW92ZVByb2plY3RzKSB7XG5cbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICQoJ2JvZHknKS5kYXRhKCdhY3Rpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uIDogXCJnZXRfcG9zdHNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckRhdGE6ICQoICcuZmlsdGVyJyApLnNlcmlhbGl6ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IGN1cnJlbnRQYWdlXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY2FuUmVtb3ZlUHJvamVjdHMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFsbC13b3Jrc19faXRlbScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2xvYWRlci5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYWRkSXRlbXMobXNnLml0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbXNnLmNvbCA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2UrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FuQWRkUHJvamVjdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FuQWRkUHJvamVjdHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChYTUxIdHRwUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gXCJhYm9ydFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChcIkVSUk9SISEhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfdGl0bGVGaXhlZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCBfc2Nyb2xsVG9wID4gX3RpdGxlUG9zVG9wICl7XG4gICAgICAgICAgICAgICAgICAgIF9zaXRlVGl0bGUuYWRkQ2xhc3MoICdmaXhlZCcgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfc2l0ZVRpdGxlLnJlbW92ZUNsYXNzKCAnZml4ZWQnICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX2NhbGN1bGF0ZVZhbHVlcygpO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuXG4gICAgfTtcblxuICAgIHZhciBGaWx0ZXIgPSBmdW5jdGlvbiggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2l0ZW0gPSBfb2JqLmZpbmQoICdpbnB1dCcgKTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX2l0ZW0ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vX29iai5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG5cbiAgICB9O1xuXG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
