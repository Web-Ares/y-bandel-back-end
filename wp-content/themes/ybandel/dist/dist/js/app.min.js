"use strict";$(function(){$(function(){$(".site__header").each(function(){new e($(this))}),$(".main").each(function(){new n($(this))}),$(".project__slider").each(function(){new t($(this))}),$(".project__pic").each(function(){$(".project__pic-wrap > a").fancybox({padding:0})}),$(".form-validation").each(function(){new i($(this))}),$(".all-works").each(function(){new o($(this))}),$(".filter").each(function(){new a($(this))}),$(".map").each(function(){new r($(this))}),$(".wpcf7 input").on({focus:function(){$(this).parent().find(".wpcf7-not-valid-tip").remove()}})});var e=function(e){var n=e,t=$(".menu__close, .menu-btn"),i=!1,o=function(){$(window).on({resize:function(){r()}}),t.on({click:function(){n.toggleClass("open"),t.toggleClass("open")}})},a=function(){n.niceScroll({cursorcolor:"#fff",railalign:"right",cursorwidth:3,cursorborder:0,autohidemode:!1,railpadding:{top:0,right:0,left:0,bottom:0}})},r=function(){i?$(window).width()>1023?n.getNiceScroll().resize():(n.getNiceScroll().remove(),n.removeClass("site__header_nice-scroll"),i=!1):$(window).width()>1023&&(a(),n.addClass("site__header_nice-scroll"),i=!0)},s=function(){o(),r()};s()},n=function(e){var n=e,t=e.find(".main__slider-next"),i=e.find(".main__slider-prev"),o=n.find(".main__slider"),a=null,r=1,s=e.find(".main__clients-pagination"),l=n.find(".main__clients"),c=null,f=5e3,d=1,u=function(){},p=function(){$(".site").hasClass("lang_en")&&(t=e.find(".main__slider-prev"),i=e.find(".main__slider-next")),a=new Swiper(o.find(".swiper-container"),{nextButton:t,prevButton:i,autoplay:7e6,slidesPerView:r,loop:!0})},_=function(){c=new Swiper(l.find(".swiper-container"),{pagination:s,slidesPerView:d,loop:!0,autoplay:f,paginationClickable:!0})},m=function(){u(),p(),_()};m()},t=function(e){var n=e,t=e.find(".project__slider-next"),i=e.find(".project__slider-prev"),o=null,a=1,r=function(){},s=function(){o=new Swiper(n.find(".swiper-container"),{nextButton:t,prevButton:i,slidesPerView:a,loop:!0})},l=function(){r(),s()};l()},i=function(e){var n=this,t=e,i=t.attr("action"),o=t.find("[required]"),a=new XMLHttpRequest,r=function(){t.on({submit:function(){return $.each(o,function(){var e=$(this),n=e.attr("type");if(""==e.val()&&e.parent().addClass("form-validation__error"),"email"==n){var t=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;0==t.test(e.val())&&e.parent().addClass("form-validation__error")}}),t.find(".form-validation__error").length?!1:(s(),!1)}}),o.on({focus:function(){var e=$(this);e.parent().hasClass("form-validation__error")&&e.parent().removeClass("form-validation__error")}})},s=function(){a.abort(),a=$.ajax({url:i,data:t.serialize(),dataType:"html",timeout:2e4,type:"get",success:function(){},error:function(e){"abort"!=e.statusText&&alert("Error!")}})},l=function(){r(),t[0].obj=n};l()},o=function(e){var n=this,t=e,i=t.find(".site__title"),o=i.offset().top,a=i.innerHeight(),r=0,s=t.find(".filter"),l=t.find("input"),c=s.offset().top,f=s.innerHeight(),d=0,u=$(window),p=u.scrollTop(),_=!0,m=t.find(".all-works__wrap"),h=t.find(".all-works__loader"),w=1,g=function(){u.on({load:function(){o=i.offset().top,c=s.offset().top,b()},scroll:function(){b(),p+u.height()>m.offset().top+m.height()&&_&&(_=!1,h.addClass("active"),C(!1))},resize:function(){o=i.offset().top,c=s.offset().top,b()}}),l.on({change:function(){_=!1,w=0,h.addClass("active"),C(!0)}})},v=function(){var e;r=i.hasClass("fixed")?i.innerHeight()+parseInt(i.css("margin-bottom")):0,d=s.hasClass("fixed")?s.innerHeight()+parseInt(s.css("margin-bottom")):0,e=r+d,t.css({"padding-top":e})},y=function(e){for(var n=0;n<e.length;n++)m.append('<div class="all-works__item all-works__item_added"><a href="'+e[n].link+'" class="all-works__pic" style="background-image: url('+e[n].pic+')"></a><div class="all-works__info"><div class="all-works__info-column">'+e[n].name+'</div><div class="all-works__info-column">'+e[n].icon+'</div><div class="all-works__info-column all-works__info-square">'+e[n].square+'<span>m<sup>2</sup></span></div><div class="all-works__info-column"><a href="'+e[n].link+'" class="btn btn_2"></a></div></div></div>');setTimeout(function(){$(".all-works__item").removeClass("all-works__item_added")},50)},b=function(){a=i.innerHeight(),f=s.innerHeight(),p=u.scrollTop(),T(),k(),v()},T=function(){p>=c-a?(s.addClass("fixed"),s.css({top:a})):(s.removeClass("fixed"),s.css({top:""}))},C=function(e){$.ajax({url:$("body").data("action"),data:{action:"get_posts",filterData:$(".filter").serialize(),currentPage:w},dataType:"json",type:"get",success:function(n){e&&$(".all-works__item").remove(),h.removeClass("active"),y(n.items),n.col>0?(w++,_=!0):_=!1},error:function(e){"abort"!=e.statusText}})},k=function(){p>o?i.addClass("fixed"):i.removeClass("fixed")},x=function(){b(),g(),t[0].obj=n};x()},a=function(e){var n=this,t=e,i=t.find("input"),o=function(){i.on({change:function(){}})},a=function(){o(),t[0].obj=n};a()},r=function(e){var n,t=e,i=[{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#9cd8e7"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{color:"#e9e9e9"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#e9e9e9"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#a8a8a8"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#b8d7c2"}]}],o=new google.maps.StyledMapType(i,{name:"Styled Map"}),a=t.data("center"),r=function(){},s=function(){var e="&language=iw";$(".lang_en").length&&(e="&language=en"),n=new google.maps.Map(document.getElementById("map"),{center:{lat:a[0],lng:a[1]},zoom:17,disableDefaultUI:!0,zoomControl:!0,scrollwheel:!1,other_params:e}),n.mapTypes.set("map_style",o),n.setMapTypeId("map_style")},l=function(){e[0].shablon=self,r(),s()};l()}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiZWFjaCIsIk1lbnUiLCJ0aGlzIiwiTWFpbiIsIlByb2plY3RTbGlkZXIiLCJmYW5jeWJveCIsInBhZGRpbmciLCJGb3JtVmFsaWRhdGlvbiIsIkFsbFdvcmtzIiwiRmlsdGVyIiwiTWFwIiwib24iLCJmb2N1cyIsInBhcmVudCIsImZpbmQiLCJyZW1vdmUiLCJvYmoiLCJfb2JqIiwiX2J0bnMiLCJfc2Nyb2xsQWRkZWQiLCJfYWRkRXZlbnRzIiwid2luZG93IiwicmVzaXplIiwiX2NhbkFkZFNjcm9sbCIsImNsaWNrIiwidG9nZ2xlQ2xhc3MiLCJfYWRkU2Nyb2xsIiwibmljZVNjcm9sbCIsImN1cnNvcmNvbG9yIiwicmFpbGFsaWduIiwiY3Vyc29yd2lkdGgiLCJjdXJzb3Jib3JkZXIiLCJhdXRvaGlkZW1vZGUiLCJyYWlscGFkZGluZyIsInRvcCIsInJpZ2h0IiwibGVmdCIsImJvdHRvbSIsIndpZHRoIiwiZ2V0TmljZVNjcm9sbCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJfaW5pdCIsIl9uZXh0QnRuIiwiX3ByZXZCdG4iLCJfbWFpblNsaWRlcldyYXAiLCJfbWFpblNsaWRlciIsIl9wZXJWaWV3IiwiX3BhZ2luYXRpb25DbGllbnRzIiwiX21haW5TbGlkZXJDbGllbnRzV3JhcCIsIl9tYWluU2xpZGVyQ2xpZW50cyIsIl9kdXJhdGlvbiIsIl9wZXJWaWV3Q2xpZW50cyIsIl9hZGRNYWluU2xpZGVyIiwiaGFzQ2xhc3MiLCJTd2lwZXIiLCJuZXh0QnV0dG9uIiwicHJldkJ1dHRvbiIsImF1dG9wbGF5Iiwic2xpZGVzUGVyVmlldyIsImxvb3AiLCJfYWRkTWFpblNsaWRlckNsaWVudHMiLCJwYWdpbmF0aW9uIiwicGFnaW5hdGlvbkNsaWNrYWJsZSIsIl9hZGRTbGlkZXIiLCJfc2VsZiIsIl9wYXRoIiwiYXR0ciIsIl9pbnB1dHMiLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0Iiwic3VibWl0IiwiY3VySXRlbSIsImN1ckF0dHIiLCJ2YWwiLCJwYXR0ZXJuIiwidGVzdCIsImxlbmd0aCIsIl9hamF4UmVxdWVzdCIsImFib3J0IiwiYWpheCIsInVybCIsImRhdGEiLCJzZXJpYWxpemUiLCJkYXRhVHlwZSIsInRpbWVvdXQiLCJ0eXBlIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzVGV4dCIsImFsZXJ0IiwiX3NpdGVUaXRsZSIsIl90aXRsZVBvc1RvcCIsIm9mZnNldCIsIl90aXRsZUhlaWdodCIsImlubmVySGVpZ2h0IiwiX3RpdGxlSGVpZ2h0SW5kZW50IiwiX2ZpbHRlciIsIl9maWx0ZXJJdGVtIiwiX2ZpbHRlclBvc1RvcCIsIl9maWx0ZXJIZWlnaHQiLCJfZmlsdGVySGVpZ2h0SW5kZW50IiwiX3dpbmRvdyIsIl9zY3JvbGxUb3AiLCJzY3JvbGxUb3AiLCJfY2FuQWRkUHJvamVjdHMiLCJfd29ya3NXcmFwIiwiX2xvYWRlciIsImN1cnJlbnRQYWdlIiwibG9hZCIsIl9jYWxjdWxhdGVWYWx1ZXMiLCJzY3JvbGwiLCJoZWlnaHQiLCJfc2VuZEFqYXgiLCJjaGFuZ2UiLCJfYWRkUGFkZGluZyIsInBhZGRpbmdUb3AiLCJwYXJzZUludCIsImNzcyIsInBhZGRpbmctdG9wIiwiX2FkZEl0ZW1zIiwiYXJyIiwiaSIsImFwcGVuZCIsImxpbmsiLCJwaWMiLCJuYW1lIiwiaWNvbiIsInNxdWFyZSIsInNldFRpbWVvdXQiLCJfZmlsdGVyRml4ZWQiLCJfdGl0bGVGaXhlZCIsImNhblJlbW92ZVByb2plY3RzIiwiYWN0aW9uIiwiZmlsdGVyRGF0YSIsIm1zZyIsIml0ZW1zIiwiY29sIiwiX2l0ZW0iLCJfbWFwIiwiX3N0eWxlcyIsImZlYXR1cmVUeXBlIiwiZWxlbWVudFR5cGUiLCJzdHlsZXJzIiwiY29sb3IiLCJfc3R5bGVkTWFwIiwiZ29vZ2xlIiwibWFwcyIsIlN0eWxlZE1hcFR5cGUiLCJfY2VudGVyIiwiX2luaXRNYXAiLCJsYW5nIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNlbnRlciIsImxhdCIsImxuZyIsInpvb20iLCJkaXNhYmxlRGVmYXVsdFVJIiwiem9vbUNvbnRyb2wiLCJzY3JvbGx3aGVlbCIsIm90aGVyX3BhcmFtcyIsIm1hcFR5cGVzIiwic2V0Iiwic2V0TWFwVHlwZUlkIiwic2hhYmxvbiIsInNlbGYiXSwibWFwcGluZ3MiOiJBQUFBLFlBQUFBLEdBQUUsV0FHRUEsRUFBRSxXQUVFQSxFQUFFLGlCQUFpQkMsS0FBTSxXQUNyQixHQUFJQyxHQUFNRixFQUFFRyxTQUdoQkgsRUFBRSxTQUFTQyxLQUFNLFdBQ2IsR0FBSUcsR0FBTUosRUFBRUcsU0FHaEJILEVBQUUsb0JBQW9CQyxLQUFNLFdBQ3hCLEdBQUlJLEdBQWVMLEVBQUVHLFNBR3pCSCxFQUFFLGlCQUFpQkMsS0FBTSxXQUNyQkQsRUFBRSwwQkFBMEJNLFVBQ3hCQyxRQUFTLE1BSWpCUCxFQUFFLG9CQUFvQkMsS0FBTSxXQUN4QixHQUFJTyxHQUFnQlIsRUFBRUcsU0FHMUJILEVBQUUsY0FBY0MsS0FBTSxXQUNsQixHQUFJUSxHQUFVVCxFQUFFRyxTQUdwQkgsRUFBRSxXQUFXQyxLQUFNLFdBQ2YsR0FBSVMsR0FBUVYsRUFBRUcsU0FHbEJILEVBQUUsUUFBUUMsS0FBTSxXQUNaLEdBQUlVLEdBQUtYLEVBQUVHLFNBR2ZILEVBQUcsZ0JBQWdCWSxJQUNmQyxNQUFTLFdBQ0xiLEVBQUVHLE1BQU1XLFNBQVNDLEtBQUssd0JBQXdCQyxhQU0xRCxJQUFJZCxHQUFPLFNBQVVlLEdBR2pCLEdBQUlDLEdBQU9ELEVBQ1BFLEVBQU9uQixFQUFFLDJCQUNUb0IsR0FBZSxFQUdmQyxFQUFhLFdBQ1RyQixFQUFFc0IsUUFBUVYsSUFDTlcsT0FBVSxXQUNOQyxPQUlSTCxFQUFNUCxJQUNGYSxNQUFPLFdBQ0hQLEVBQUtRLFlBQWEsUUFDbEJQLEVBQU1PLFlBQWEsWUFLL0JDLEVBQWEsV0FDVFQsRUFBS1UsWUFDREMsWUFBYSxPQUNiQyxVQUFXLFFBQ1hDLFlBQWEsRUFDYkMsYUFBYyxFQUNkQyxjQUFjLEVBQ2RDLGFBQWNDLElBQUss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YUFBY1YsSUFHbEJaLEVBQUt1QixTQUFTQyxJQUFJLFlBQWFsQixHQUMvQk4sRUFBS3lCLGFBQWEsY0FFdEIxSCxFQUFRLFdBQ0oxQixFQUFJLEdBQUdxSixRQUFVQyxLQUNqQmxKLElBQ0FrSSxJQUlSNUciLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24oKXtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAkKGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgJCgnLnNpdGVfX2hlYWRlcicpLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmV3IE1lbnUoICQodGhpcykgKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5tYWluJykuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuZXcgTWFpbiggJCh0aGlzKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLnByb2plY3RfX3NsaWRlcicpLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmV3IFByb2plY3RTbGlkZXIoICQodGhpcykgKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5wcm9qZWN0X19waWMnKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoXCIucHJvamVjdF9fcGljLXdyYXAgPiBhXCIpLmZhbmN5Ym94KHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5mb3JtLXZhbGlkYXRpb24nKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5ldyBGb3JtVmFsaWRhdGlvbiggJCh0aGlzKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLmFsbC13b3JrcycpLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmV3IEFsbFdvcmtzKCAkKHRoaXMpICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCcuZmlsdGVyJykuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuZXcgRmlsdGVyKCAkKHRoaXMpICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCcubWFwJykuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuZXcgTWFwKCAkKHRoaXMpICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCAnLndwY2Y3IGlucHV0Jykub24oIHtcbiAgICAgICAgICAgICdmb2N1cyc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLndwY2Y3LW5vdC12YWxpZC10aXAnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuXG4gICAgfSk7XG5cbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uKCBvYmogKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfYnRucz0gJCgnLm1lbnVfX2Nsb3NlLCAubWVudS1idG4nKSxcbiAgICAgICAgICAgIF9zY3JvbGxBZGRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQod2luZG93KS5vbigge1xuICAgICAgICAgICAgICAgICAgICAncmVzaXplJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FuQWRkU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfYnRucy5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnRvZ2dsZUNsYXNzKCAnb3BlbicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9idG5zLnRvZ2dsZUNsYXNzKCAnb3BlbicgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRTY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqLm5pY2VTY3JvbGwoe1xuICAgICAgICAgICAgICAgICAgICBjdXJzb3Jjb2xvcjogXCIjZmZmXCIsXG4gICAgICAgICAgICAgICAgICAgIHJhaWxhbGlnbjogJ3JpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yd2lkdGg6IDMsXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcmJvcmRlcjogMCxcbiAgICAgICAgICAgICAgICAgICAgYXV0b2hpZGVtb2RlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcmFpbHBhZGRpbmc6IHt0b3A6IDAsIHJpZ2h0OiAwLCBsZWZ0OiAwLCBib3R0b206IDB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NhbkFkZFNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICggX3Njcm9sbEFkZGVkICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICQoIHdpbmRvdyApLndpZHRoKCkgPiAxMDIzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5nZXROaWNlU2Nyb2xsKCkucmVzaXplKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmdldE5pY2VTY3JvbGwoKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfbmljZS1zY3JvbGwnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2Nyb2xsQWRkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggJCggd2luZG93ICkud2lkdGgoKSA+IDEwMjMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYWRkU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX25pY2Utc2Nyb2xsJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Njcm9sbEFkZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2NhbkFkZFNjcm9sbCgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgTWFpbiA9IGZ1bmN0aW9uKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX25leHRCdG4gPSBvYmouZmluZCggJy5tYWluX19zbGlkZXItbmV4dCcgKSxcbiAgICAgICAgICAgIF9wcmV2QnRuID0gb2JqLmZpbmQoICcubWFpbl9fc2xpZGVyLXByZXYnICksXG4gICAgICAgICAgICBfbWFpblNsaWRlcldyYXAgPSBfb2JqLmZpbmQoJy5tYWluX19zbGlkZXInKSxcbiAgICAgICAgICAgIF9tYWluU2xpZGVyID0gbnVsbCxcbiAgICAgICAgICAgIF9wZXJWaWV3ID0gMSxcbiAgICAgICAgICAgIF9wYWdpbmF0aW9uQ2xpZW50cyA9IG9iai5maW5kKCAnLm1haW5fX2NsaWVudHMtcGFnaW5hdGlvbicgKSxcbiAgICAgICAgICAgIF9tYWluU2xpZGVyQ2xpZW50c1dyYXAgPSBfb2JqLmZpbmQoJy5tYWluX19jbGllbnRzJyksXG4gICAgICAgICAgICBfbWFpblNsaWRlckNsaWVudHMgPSBudWxsLFxuICAgICAgICAgICAgX2R1cmF0aW9uID0gNTAwMCxcbiAgICAgICAgICAgIF9wZXJWaWV3Q2xpZW50cyA9IDE7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRNYWluU2xpZGVyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoICQoICcuc2l0ZScpLmhhc0NsYXNzKCAnbGFuZ19lbicgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgX25leHRCdG4gPSBvYmouZmluZCggJy5tYWluX19zbGlkZXItcHJldicgKTtcbiAgICAgICAgICAgICAgICAgICAgX3ByZXZCdG4gPSBvYmouZmluZCggJy5tYWluX19zbGlkZXItbmV4dCcgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfbWFpblNsaWRlciA9IG5ldyBTd2lwZXIoIF9tYWluU2xpZGVyV3JhcC5maW5kKCAnLnN3aXBlci1jb250YWluZXInICksIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX25leHRCdG4sXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9wcmV2QnRuLFxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogNzAwMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogX3BlclZpZXcsXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWRkTWFpblNsaWRlckNsaWVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9tYWluU2xpZGVyQ2xpZW50cyA9IG5ldyBTd2lwZXIoIF9tYWluU2xpZGVyQ2xpZW50c1dyYXAuZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IF9wYWdpbmF0aW9uQ2xpZW50cyxcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogX3BlclZpZXdDbGllbnRzLFxuICAgICAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogX2R1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uQ2xpY2thYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2FkZE1haW5TbGlkZXIoKTtcbiAgICAgICAgICAgICAgICBfYWRkTWFpblNsaWRlckNsaWVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgUHJvamVjdFNsaWRlciA9IGZ1bmN0aW9uKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX25leHRCdG4gPSBvYmouZmluZCggJy5wcm9qZWN0X19zbGlkZXItbmV4dCcgKSxcbiAgICAgICAgICAgIF9wcmV2QnRuID0gb2JqLmZpbmQoICcucHJvamVjdF9fc2xpZGVyLXByZXYnICksXG4gICAgICAgICAgICBfbWFpblNsaWRlciA9IG51bGwsXG4gICAgICAgICAgICBfcGVyVmlldyA9IDE7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZFNsaWRlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX21haW5TbGlkZXIgPSBuZXcgU3dpcGVyKCBfb2JqLmZpbmQoICcuc3dpcGVyLWNvbnRhaW5lcicgKSwge1xuICAgICAgICAgICAgICAgICAgICBuZXh0QnV0dG9uOiBfbmV4dEJ0bixcbiAgICAgICAgICAgICAgICAgICAgcHJldkJ1dHRvbjogX3ByZXZCdG4sXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IF9wZXJWaWV3LFxuICAgICAgICAgICAgICAgICAgICBsb29wOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2FkZFNsaWRlcigpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBGb3JtVmFsaWRhdGlvbiA9IGZ1bmN0aW9uKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfcGF0aCA9IF9vYmouYXR0ciggJ2FjdGlvbicgKSxcbiAgICAgICAgICAgIF9pbnB1dHMgPSBfb2JqLmZpbmQoICdbcmVxdWlyZWRdJyApLFxuICAgICAgICAgICAgLy9fc2VudE1lc3NhZ2VNYXJrID0gX29iai5maW5kKCAnLnNpdGVfX2Zvcm0tc2VudCcgKSxcbiAgICAgICAgICAgIF9yZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9vYmoub24oe1xuXG4gICAgICAgICAgICAgICAgICAgICdzdWJtaXQnOiBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goIF9pbnB1dHMsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyQXR0ciA9IGN1ckl0ZW0uYXR0ciggJ3R5cGUnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ckl0ZW0udmFsKCkgPT0gJycgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucGFyZW50KCkuYWRkQ2xhc3MoICdmb3JtLXZhbGlkYXRpb25fX2Vycm9yJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY3VyQXR0ciA9PSAnZW1haWwnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gL14oW2EtejAtOV9cXC4tXSkrQFthLXowLTktXStcXC4oW2Etel17Miw0fVxcLik/W2Etel17Miw0fSQvaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXR0ZXJuLnRlc3QoIGN1ckl0ZW0udmFsKCkgKSA9PSBmYWxzZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5wYXJlbnQoKS5hZGRDbGFzcyggJ2Zvcm0tdmFsaWRhdGlvbl9fZXJyb3InICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfb2JqLmZpbmQoICcuZm9ybS12YWxpZGF0aW9uX19lcnJvcicgKS5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWpheFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgX2lucHV0cy5vbih7XG5cbiAgICAgICAgICAgICAgICAgICAgJ2ZvY3VzJzogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCggdGhpcyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5wYXJlbnQoKS5oYXNDbGFzcyggJ2Zvcm0tdmFsaWRhdGlvbl9fZXJyb3InICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5wYXJlbnQoKS5yZW1vdmVDbGFzcyggJ2Zvcm0tdmFsaWRhdGlvbl9fZXJyb3InICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWpheFJlcXVlc3QgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgICAgICAgICAgX3JlcXVlc3QgPSAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IF9wYXRoLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBfb2JqLnNlcmlhbGl6ZSgpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAyMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19vYmoudHJpZ2dlciggJ3Jlc2V0JyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19vYmouYWRkQ2xhc3MoICdzaXRlX19mb3JtLXN1Y2Nlc3MnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgKCBfc2VudE1lc3NhZ2VNYXJrLmxlbmd0aCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIF9zZW50TWVzc2FnZU1hcmsuYWRkQ2xhc3MoICdzaXRlX19mb3JtLXNlbnRfc2hvdycgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL31cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCBYTUxIdHRwUmVxdWVzdCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCggJ0Vycm9yIScgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcblxuICAgIH07XG5cbiAgICB2YXIgQWxsV29ya3MgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9zaXRlVGl0bGUgPSBfb2JqLmZpbmQoICcuc2l0ZV9fdGl0bGUnICksXG4gICAgICAgICAgICBfdGl0bGVQb3NUb3AgPSBfc2l0ZVRpdGxlLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgIF90aXRsZUhlaWdodCA9IF9zaXRlVGl0bGUuaW5uZXJIZWlnaHQoKSxcbiAgICAgICAgICAgIF90aXRsZUhlaWdodEluZGVudCA9IDAsXG4gICAgICAgICAgICBfZmlsdGVyID0gX29iai5maW5kKCAnLmZpbHRlcicgKSxcbiAgICAgICAgICAgIF9maWx0ZXJJdGVtID0gX29iai5maW5kKCAnaW5wdXQnICksXG4gICAgICAgICAgICBfZmlsdGVyUG9zVG9wID0gX2ZpbHRlci5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgICBfZmlsdGVySGVpZ2h0ID0gX2ZpbHRlci5pbm5lckhlaWdodCgpLFxuICAgICAgICAgICAgX2ZpbHRlckhlaWdodEluZGVudCA9IDAsXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfc2Nyb2xsVG9wID0gX3dpbmRvdy5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgIF9jYW5BZGRQcm9qZWN0cyA9IHRydWUsXG4gICAgICAgICAgICBfd29ya3NXcmFwID0gX29iai5maW5kKCcuYWxsLXdvcmtzX193cmFwJyksXG4gICAgICAgICAgICBfbG9hZGVyID0gX29iai5maW5kKCAnLmFsbC13b3Jrc19fbG9hZGVyJyksXG4gICAgICAgICAgICBjdXJyZW50UGFnZSA9IDE7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKHtcbiAgICAgICAgICAgICAgICAgICAgJ2xvYWQnOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RpdGxlUG9zVG9wID0gX3NpdGVUaXRsZS5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZmlsdGVyUG9zVG9wID0gX2ZpbHRlci5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FsY3VsYXRlVmFsdWVzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdzY3JvbGwnOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NhbGN1bGF0ZVZhbHVlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoX3Njcm9sbFRvcCArIF93aW5kb3cuaGVpZ2h0KCkgKSA+IChfd29ya3NXcmFwLm9mZnNldCgpLnRvcCArIF93b3Jrc1dyYXAuaGVpZ2h0KCkpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggX2NhbkFkZFByb2plY3RzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FuQWRkUHJvamVjdHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvYWRlci5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZW5kQWpheCggZmFsc2UgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdyZXNpemUnOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RpdGxlUG9zVG9wID0gX3NpdGVUaXRsZS5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZmlsdGVyUG9zVG9wID0gX2ZpbHRlci5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FsY3VsYXRlVmFsdWVzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF9maWx0ZXJJdGVtLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgICdjaGFuZ2UnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYW5BZGRQcm9qZWN0cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2UgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2xvYWRlci5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2VuZEFqYXgoIHRydWUgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRQYWRkaW5nID0gZnVuY3Rpb24oKSAge1xuXG4gICAgICAgICAgICAgICAgdmFyIHBhZGRpbmdUb3A7XG5cbiAgICAgICAgICAgICAgICBpZiAoIF9zaXRlVGl0bGUuaGFzQ2xhc3MoICdmaXhlZCcgKSApe1xuICAgICAgICAgICAgICAgICAgICBfdGl0bGVIZWlnaHRJbmRlbnQgPSBfc2l0ZVRpdGxlLmlubmVySGVpZ2h0KCkgKyBwYXJzZUludCggX3NpdGVUaXRsZS5jc3MoICdtYXJnaW4tYm90dG9tJyApICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RpdGxlSGVpZ2h0SW5kZW50ID0gMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIF9maWx0ZXIuaGFzQ2xhc3MoICdmaXhlZCcgKSApe1xuICAgICAgICAgICAgICAgICAgICBfZmlsdGVySGVpZ2h0SW5kZW50ID0gX2ZpbHRlci5pbm5lckhlaWdodCgpICsgcGFyc2VJbnQoIF9maWx0ZXIuY3NzKCAnbWFyZ2luLWJvdHRvbScgKSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF9maWx0ZXJIZWlnaHRJbmRlbnQgPSAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHBhZGRpbmdUb3AgPSBfdGl0bGVIZWlnaHRJbmRlbnQgKyBfZmlsdGVySGVpZ2h0SW5kZW50O1xuXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhZGRpbmctdG9wJzogcGFkZGluZ1RvcFxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRJdGVtcyA9IGZ1bmN0aW9uKCBhcnIgKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9MDsgaSA8IGFyci5sZW5ndGg7IGkrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgX3dvcmtzV3JhcC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJhbGwtd29ya3NfX2l0ZW0gYWxsLXdvcmtzX19pdGVtX2FkZGVkXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICc8YSBocmVmPVwiJyArIGFycltpXS5saW5rICsgJ1wiIGNsYXNzPVwiYWxsLXdvcmtzX19waWNcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgnICsgYXJyW2ldLnBpYyArICcpXCI+PC9hPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsbC13b3Jrc19faW5mb1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsbC13b3Jrc19faW5mby1jb2x1bW5cIj4nICsgYXJyW2ldLm5hbWUgKyAnPC9kaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxsLXdvcmtzX19pbmZvLWNvbHVtblwiPicgKyBhcnJbaV0uaWNvbiArICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGwtd29ya3NfX2luZm8tY29sdW1uIGFsbC13b3Jrc19faW5mby1zcXVhcmVcIj4nICsgYXJyW2ldLnNxdWFyZSArICc8c3Bhbj5tPHN1cD4yPC9zdXA+PC9zcGFuPjwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsbC13b3Jrc19faW5mby1jb2x1bW5cIj48YSBocmVmPVwiJyArIGFycltpXS5saW5rICsgJ1wiIGNsYXNzPVwiYnRuIGJ0bl8yXCI+PC9hPjwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJCggJy5hbGwtd29ya3NfX2l0ZW0nKS5yZW1vdmVDbGFzcyggJ2FsbC13b3Jrc19faXRlbV9hZGRlZCcgKTtcblxuICAgICAgICAgICAgICAgIH0sIDUwICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2FsY3VsYXRlVmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX3RpdGxlSGVpZ2h0ID0gX3NpdGVUaXRsZS5pbm5lckhlaWdodCgpO1xuICAgICAgICAgICAgICAgIF9maWx0ZXJIZWlnaHQgPSBfZmlsdGVyLmlubmVySGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgX3Njcm9sbFRvcCA9IF93aW5kb3cuc2Nyb2xsVG9wKCk7XG4gICAgICAgICAgICAgICAgX2ZpbHRlckZpeGVkKCk7XG4gICAgICAgICAgICAgICAgX3RpdGxlRml4ZWQoKTtcbiAgICAgICAgICAgICAgICBfYWRkUGFkZGluZygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9maWx0ZXJGaXhlZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCBfc2Nyb2xsVG9wID49IF9maWx0ZXJQb3NUb3AgLSBfdGl0bGVIZWlnaHQgKXtcbiAgICAgICAgICAgICAgICAgICAgX2ZpbHRlci5hZGRDbGFzcyggJ2ZpeGVkJyApO1xuICAgICAgICAgICAgICAgICAgICBfZmlsdGVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBfdGl0bGVIZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF9maWx0ZXIucmVtb3ZlQ2xhc3MoICdmaXhlZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgX2ZpbHRlci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJydcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZW5kQWpheCA9IGZ1bmN0aW9uKGNhblJlbW92ZVByb2plY3RzKSB7XG5cbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICQoJ2JvZHknKS5kYXRhKCdhY3Rpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uIDogXCJnZXRfcG9zdHNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckRhdGE6ICQoICcuZmlsdGVyJyApLnNlcmlhbGl6ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IGN1cnJlbnRQYWdlXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY2FuUmVtb3ZlUHJvamVjdHMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFsbC13b3Jrc19faXRlbScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2xvYWRlci5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYWRkSXRlbXMobXNnLml0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbXNnLmNvbCA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2UrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FuQWRkUHJvamVjdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FuQWRkUHJvamVjdHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChYTUxIdHRwUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gXCJhYm9ydFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChcIkVSUk9SISEhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfdGl0bGVGaXhlZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCBfc2Nyb2xsVG9wID4gX3RpdGxlUG9zVG9wICl7XG4gICAgICAgICAgICAgICAgICAgIF9zaXRlVGl0bGUuYWRkQ2xhc3MoICdmaXhlZCcgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfc2l0ZVRpdGxlLnJlbW92ZUNsYXNzKCAnZml4ZWQnICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX2NhbGN1bGF0ZVZhbHVlcygpO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuXG4gICAgfTtcblxuICAgIHZhciBGaWx0ZXIgPSBmdW5jdGlvbiggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2l0ZW0gPSBfb2JqLmZpbmQoICdpbnB1dCcgKTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX2l0ZW0ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vX29iai5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG5cbiAgICB9O1xuXG4gICAgdmFyIE1hcCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9zdHlsZXMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlVHlwZTogXCJyb2FkXCIsXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImdlb21ldHJ5XCIsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlcnM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtjb2xvcjogJyNmZmZmZmYnfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlVHlwZTogJ3dhdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFR5cGU6ICdnZW9tZXRyeS5maWxsJyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVyczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge2NvbG9yOiAnIzljZDhlNyd9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9LHtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVR5cGU6ICdsYW5kc2NhcGUnLFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50VHlwZTogJ2dlb21ldHJ5LmZpbGwnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7Y29sb3I6ICcjZTllOWU5J31cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0se1xuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlVHlwZTogJ2FkbWluaXN0cmF0aXZlJyxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFR5cGU6ICdnZW9tZXRyeS5maWxsJyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVyczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge2NvbG9yOiAnI2U5ZTllOSd9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9LHtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVR5cGU6ICdhbGwnLFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50VHlwZTogJ2xhYmVscy50ZXh0LmZpbGwnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7Y29sb3I6ICcjYThhOGE4J31cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVR5cGU6ICdwb2knLFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50VHlwZTogJ2dlb21ldHJ5LmZpbGwnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7Y29sb3I6ICcjYjhkN2MyJ31cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBfc3R5bGVkTWFwID0gbmV3IGdvb2dsZS5tYXBzLlN0eWxlZE1hcFR5cGUoX3N0eWxlcywge25hbWU6IFwiU3R5bGVkIE1hcFwifSksXG4gICAgICAgICAgICBfbWFwLFxuICAgICAgICAgICAgX2NlbnRlciA9IF9vYmouZGF0YSggJ2NlbnRlcicpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXRNYXAgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBsYW5nID0gJyZsYW5ndWFnZT1pdyc7XG5cbiAgICAgICAgICAgICAgICBpZiAoICQoICcubGFuZ19lbicpLmxlbmd0aCApIHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZyA9ICcmbGFuZ3VhZ2U9ZW4nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IHtsYXQ6IF9jZW50ZXJbMF0sIGxuZzogX2NlbnRlclsxXX0sXG4gICAgICAgICAgICAgICAgICAgIHpvb206IDE3LFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlRGVmYXVsdFVJOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBvdGhlcl9wYXJhbXM6IGxhbmdcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF9tYXAubWFwVHlwZXMuc2V0KCdtYXBfc3R5bGUnLCBfc3R5bGVkTWFwKTtcbiAgICAgICAgICAgICAgICBfbWFwLnNldE1hcFR5cGVJZCgnbWFwX3N0eWxlJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgb2JqWzBdLnNoYWJsb24gPSBzZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfaW5pdE1hcCgpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
